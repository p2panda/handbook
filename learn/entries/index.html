<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-learn/entries" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Entries | p2panda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://p2panda.org/learn/entries"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Entries | p2panda"><meta data-rh="true" name="description" content="While a lot in this document is still true for p2panda we&#x27;ve slightly adjusted our core data types to look a little bit different, for example &quot;Bamboo&quot; got removed. You can read more about it in our namakemono specification. This section will be adjusted soon!"><meta data-rh="true" property="og:description" content="While a lot in this document is still true for p2panda we&#x27;ve slightly adjusted our core data types to look a little bit different, for example &quot;Bamboo&quot; got removed. You can read more about it in our namakemono specification. This section will be adjusted soon!"><link data-rh="true" rel="icon" href="/images/deepsea-panda.svg"><link data-rh="true" rel="canonical" href="https://p2panda.org/learn/entries"><link data-rh="true" rel="alternate" href="https://p2panda.org/learn/entries" hreflang="en"><link data-rh="true" rel="alternate" href="https://p2panda.org/learn/entries" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="p2panda News RSS Feed"><link rel="stylesheet" href="/assets/css/styles.862b1275.css">
<script src="/assets/js/runtime~main.46debaa3.js" defer="defer"></script>
<script src="/assets/js/main.97848bd4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><div class="navbar__brand"><div class="navbar__logo"><img src="/images/p2panda-book.png" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/images/p2panda-book.png" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></div></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/about/">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/learn/">Learn</a><a class="navbar__item navbar__link" href="/tutorials/">Tutorials</a><a class="navbar__item navbar__link" href="/sdks/">SDKs</a><a class="navbar__item navbar__link" href="/specifications/">Specifications</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/faq">FAQ</a><a class="navbar__item navbar__link" href="/links">Links</a><a class="navbar__item navbar__link" href="/contact">Contact</a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedComponent_mlkZ themedComponent--dark_xIcU"></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/learn/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/learn/entries">Entries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/learn/operations">Operations and Documents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/learn/networks">Networks</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><img src="/images/deepsea-panda.svg" width="30" class="icon-home_wWeS"></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Entries</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Entries</h1></header><div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🙈</span></span>Slightly outdated</div><div class="admonitionContent_BuS1"><p>While a lot in this document is still true for p2panda we&#x27;ve slightly adjusted our core data types to look a little bit different, for example &quot;Bamboo&quot; got removed. You can read more about it in our <a href="/specifications/namakemono">namakemono specification</a>. This section will be adjusted soon!</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="trust-is-funny">Trust is funny<a href="#trust-is-funny" class="hash-link" aria-label="Direct link to Trust is funny" title="Direct link to Trust is funny">​</a></h2>
<p>Oh, we’ve just got this postcard from a Penguin:</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAn0lEQVR4nFWOsQrCMBRF86PFzY9wFSx+h5NIoB9gNidnXQSdROrSWps0L3kvudKCghcuB85wuUpEZlHExCg6JVQAqpRkIuxZh/vGSHcsFDOvAeBtHVOISDmjaVu4CPjHjrvTHOm2KFXfu5UdPNpXZ611FJnJ+4HqZqDr5WC53iI898vfIlHgkTnnEd9MDkCpAMwAGAB6+vXXpCHBQKT4AMZtttv+FsoNAAAAAElFTkSuQmCC&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1084" height="580"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/postcard-from-mr-penguin.927ebb5.1084.png" srcset="/assets/ideal-img/postcard-from-mr-penguin.927ebb5.1084.png 1084w" alt="A postcard from Mr. Penguin" width="1084" height="580"></noscript></div></div><div class="image-frame-title_UNlE">A postcard from Mr. Penguin</div></div>
<p>The Penguin-Postcard-Protocol (PPP) of Shirokuma-Town is a p2p protocol without computers: Every Penguin can send any postcard to any other Penguin through some delivery service which has multiple stations across the town.</p>
<p>The Penguins in Shirokuma-Town are very happy with PPP, even though it has many flaws. For example: When we know Mr. Penguin, we probably will follow the invitation, but how can we be <em>really</em> sure this postcard was actually sent by Mr. Penguin? And how can we be sure that nobody changed that postcard before it arrived in our inbox? Maybe someone from the delivery service changed its message or even the address?</p>
<p>Probably we will not send anything important in a postcard because we can not <em>really trust</em> the Penguin-Postcard-Protocol. Maybe Mr. Penguin will use Zoognal to send a more important message next time?</p>
<p>On the internet we usually trust some sort of platform or the underlying protocol and hope it will_ secure_ our messages. This assures us that the data comes from that person and it didn’t get changed by someone else after it got sent. Most of the time we speak about <strong>Authentication</strong> in this regard: Who is the <em>authentic</em> person behind that data?</p>
<p>We learned some Authentication patterns from the last years and rely on them a lot: For example we confirm our email addresses or mobile phone numbers and have some kind of password to get access to our accounts.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>Icebears philosophical corner</div><div class="admonitionContent_BuS1"><p>Is that secure? Do email addresses prove enough who we are? We <em>do</em> put a lot of trust in the computers, programs and platforms we’re using. But that’s also true for everything else around us! This discussion can get very deep and philosophical and not even the most radical “trust less” p2p protocol can give us a definite answer.</p><p>We can already see that trust is a funny thing. But enough for now, let’s think about <em>some</em> solutions we can give to provide authentication in a decentralised system and we will see that they are at least more secure than postcards!</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="bamboo">Bamboo<a href="#bamboo" class="hash-link" aria-label="Direct link to Bamboo" title="Direct link to Bamboo">​</a></h2>
<p>To secure and authenticate <em>any</em> data, we’re using a special data type named <strong>Bamboo</strong> which helps us with these problems.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>Infotainment intermission</div><div class="admonitionContent_BuS1"><p>The name is no coincidence! Pandas love bamboo! The Bamboo data type was designed (also) with p2panda in mind. Read about its specification <a href="https://github.com/AljoschaMeyer/bamboo" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div>
<p>The main data type of Bamboo is an <strong>Entry</strong> which can point at any sort of data, for example the postcard of Mr. Penguin. We can think about it as a <em>seal</em> we put on the postcard to indicate that it a) came from a certain person b) it wasn’t opened and potentially changed before it arrived in our inbox.</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAApklEQVR4nGNgQANnzpxh3Xv4vPbuA2d0rzz6oFLX0Jy6ZMkSAwat9hvlBl03z+p23Dot1vzQ5fXZDVIb9538t2Hv8f87j174dejstf8Hz16dxaDderVGo/PexZD2I492VTY3rT1xUWbj3hP/N+8/9f/QuRu/z9159v/wuRszGf7/Z2AEWfl/i5fE/y1ujiD23pPntQ+du6V1/PJ9zf2nrulsP3NNEgD4HVgR528XmwAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1276" height="532"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/sealing-any-data.dbd3a3a.1276.png" srcset="/assets/ideal-img/sealing-any-data.dbd3a3a.1276.png 1276w" alt="Entry &#x27;sealing&#x27; any data" width="1276" height="532"></noscript></div></div><div class="image-frame-title_UNlE">Entry &#x27;sealing&#x27; any data</div></div>
<p>Let’s look a little bit closer into how Bamboo Entries help us here. From now on we will call any data the <strong>Payload</strong>, just to slowly move towards the terminology used in the official Bamboo specification.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐧</span></span>Privacy vs. security</div><div class="admonitionContent_BuS1"><p>What about <em>privacy</em>? Anyone can read our postcards when we send them around! Bamboo Entries do provide authentication and security, but not  privacy. For this p2panda has something else: Secret Groups!</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="does-the-entry-really-point-at-this-particular-payload">Does the Entry really point at this particular Payload?<a href="#does-the-entry-really-point-at-this-particular-payload" class="hash-link" aria-label="Direct link to Does the Entry really point at this particular Payload?" title="Direct link to Does the Entry really point at this particular Payload?">​</a></h3>
<p>Whenever we create a new Entry we generate a <strong>Hash</strong> of the data it is pointing at. This Hash we store inside the Entry as the <code>payload_hash</code>. Whenever we receive the Entry and the Payload we re-create the Hash of it <em>again</em> and compare it with the <code>payload_hash</code> which is given by the original Entry. If they diverge we can be sure the data got changed by someone and we can’t trust it anymore!</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>What is hashing?</div><div class="admonitionContent_BuS1"><p>Hashing is a way to convert (large) data into a shorter representation. For example the letter of Penguin can be expressed as this (BLAKE3) hash: <code>6c35954716cb993c153e55b25650d87119ceacd0646d2de5450b14dd97897b82</code>. This allows us to refer to it without sending the whole original data again. We can not re-create the original data from a Hash, this information will be gone, but we will always be able to recreate it and arrive at the same Hash value as soon as we have the original data.</p></div></div>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR4nGNgwAHMPKL5GBgYOOOjwyzm19dzwMQZQcT///9Zth06u3DroTOnthw4dXLzvlPHlq/b8vXQuet5YFX///+HKWTbe+bapX1nrv8/eO7m37O3nvy+/uzT/0v3X3WimLj//3+W7UfOzwWZduDMtf1HL97ad+T8rQuHz99Mx3CbcVoaa9f8+RJpafVc0bn1fCX1XRIMDAzMGArl5e05siraVKySknjdQpOFsoqb5RkYGFgwFK66coVt2bZDervP3OXftm0b+549l8TBErqd11LM+28dsp5wa7tR542FWauu8Py//5+j/+wMu65zXS5wP7hOutkRtvDxf5/pt35Z9d28Xb/zghhIpmZPQ37F3qpaELv+fz0Tg+TMM1xqPWdEpCpOCvNnHhaEmsDEICnJJa6nx21vbw92HwCGXYyaaW7oHAAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1108" height="1086"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/comparing-hash-and-size.66c68f7.1108.png" srcset="/assets/ideal-img/comparing-hash-and-size.66c68f7.1108.png 1108w" alt="Comparing hash and size" width="1108" height="1086"></noscript></div></div><div class="image-frame-title_UNlE">Comparing hash and size</div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>Hash specification</div><div class="admonitionContent_BuS1"><p>We need to specify <em>how</em> we hash something so we can recreate and validate hashes at any point. p2panda uses the <a href="https://github.com/BLAKE3-team/BLAKE3" target="_blank" rel="noopener noreferrer">BLAKE3</a> hashing algorithm and wraps it around the <a href="https://github.com/bamboo-rs/yasmf-hash-spec" target="_blank" rel="noopener noreferrer">YASMF</a> format to allow future changes where we might want to change the hashing algorithm without breaking anything from before.</p></div></div>
<p>Next to the <code>payload_hash</code> an Entry also holds the size of the Payload in a field called <code>payload_size</code>. If the Payload would be <code>21</code> bytes large it would be mentioned there. With this we can check now if a) the Payload size is still the same b) know how large the data is even before we looked at it ourselves.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-if-the-entry-got-changed">What if the Entry got changed?<a href="#what-if-the-entry-got-changed" class="hash-link" aria-label="Direct link to What if the Entry got changed?" title="Direct link to What if the Entry got changed?">​</a></h3>
<p>We can verify now if the Payload itself got changed by comparing the <code>payload_hash</code> and <code>payload_size</code> - but what if the Entry itself got manipulated? To solve this, every Entry contains a <strong>Signature</strong>! It needs to be generated after the Entry values are set.</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9UlEQVR4nGPQ6jgjp9Z8xUOz9aqzRus1V53Wa/b29f9ZGKCgvp6BiYGBgZFBv/9hgdmsT//tpz/7ZTb15X+t3mfvQrs3Kvb21gtZlXbypqUkT50yoceGwbT7eobr5Bt/7CbefhEx+/y3sMl7njFkXBD7fyaNVSs0lCchOS1+3rzlsgzGaWdYGez3c5gkLJedPrdY68JWTzWYtSArZSxCOY2NjVnBHBARkZwsHhoayoakCBX8//8frHDjxj3i+/fv9/n//z/I8diBnp6eWGVlxboDe/YEImvGAL6hoSqBwWHtenp63DhNg4BQZhkLC04zj2g+XEoAatNYECUB3DIAAAAASUVORK5CYII=&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="868" height="750"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/signing-an-entry-with-a-private-key.6e635e2.868.png" srcset="/assets/ideal-img/signing-an-entry-with-a-private-key.6e635e2.868.png 868w" alt="Signing an entry with a private key" width="868" height="750"></noscript></div></div><div class="image-frame-title_UNlE">Signing an entry with a private key</div></div>
<p>To sign an Entry we need some sort of <strong>Digital Signature Algorithm</strong> which always comes with a <strong>Public-</strong> and <strong>Private Key</strong>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>Down the cryptography rabbit hole</div><div class="admonitionContent_BuS1"><p>Where do we get these keys from? We can simply generate them ourselves without any central authority!</p><p>To make sure we can create a key pair without anyone else accidentally creating the same we use cryptographically secure pseudorandom number generators (CSPRNG). These generators are usually given by every computer and help us with finding a very large, random number which very likely will not occur a second time in the world ever.</p><p>A Digital Signature Algorithm defines how these random numbers are used to derive a Private Key and then a Public Key from it.</p></div></div>
<p>The private part is a secret information only the author of this Entry knows about. With the Signature Algorithm we take the Entry and the Private Key as inputs and generate the Signature itself. Finally we store it in the <code>signature</code> field of the Entry.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>Analogies never work</div><div class="admonitionContent_BuS1"><p>An (somewhat) analogy to public key cryptography would be IRL signatures we write with a pen on paper: A person signs a document to show that they “approved” this version of it - but also to authenticate themselves. Ideally only the person knows how to write that signature and nobody else will be able to fake it. This is where the analogy falls a little bit apart: In public key cryptography faking the private key is much harder or almost impossible.</p></div></div>
<p>Now we get two guarantees: a) if the Entry data got changed after signing it, the Signature is not valid anymore b) with signing the data we also shown now that we are the owner of that Private Key! A Signature Algorithm assures us that nobody else could have generated that particular signature without knowing the Private Key secret.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>DSA specification</div><div class="admonitionContent_BuS1"><p>Similar to defining the Hashing Algorithm in Bamboo, we also need to define the Digital Signature Algorithm (DSA). p2panda uses <a href="https://ed25519.cr.yp.to/" target="_blank" rel="noopener noreferrer">Ed25519</a>.</p></div></div>
<p>Whenever we receive an Entry and Payload now from somewhere, we can check if the Signature really fits the given Entry. If we can not verify the Signature we can’t trust that the Entry didn’t get changed.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="how-do-we-know-the-signature-really-belongs-to-the-author">How do we know the Signature really belongs to the Author?<a href="#how-do-we-know-the-signature-really-belongs-to-the-author" class="hash-link" aria-label="Direct link to How do we know the Signature really belongs to the Author?" title="Direct link to How do we know the Signature really belongs to the Author?">​</a></h3>
<p>We can verify now if the Payload and Entry didn’t get changed and really belong together, but how do we know that the Signature belongs to that Author?</p>
<p>Besides the <code>signature</code> the Entry needs to provide an <code>author</code> field which contains the <em>Public Key</em> part of the original author. In contrast to the Private Key the public part is not a secret and can be shared with others.</p>
<p>When we verify the Signature of the Entry we take the Public Key, the part of the Entry which was used during signing and the Signature itself to check if they all belong together.</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAl0lEQVR4nGNgYPjPyFD/nwmE02bOZK1snSCeVl4vV1jfK1RfX8/EAANabdfqDbtuXNBtu7olumWtZP/U2Zq1ndNsW2fPFg/VWsVWfbjapv5SvRKDRss1I/2um4HabdfcinqWirT0zZSsaJssXN87W8hefj5Hyfry4NwNRYZwk2GgsL5eKLOiXam+e5pYfH09R309AxPIeQD5rDfRiACMeQAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1462" height="616"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/verify-signature-of-entry.8c024bf.1462.png" srcset="/assets/ideal-img/verify-signature-of-entry.8c024bf.1462.png 1462w" alt="Verifying the Signature of an Entry" width="1462" height="616"></noscript></div></div><div class="image-frame-title_UNlE">Verifying the Signature of an Entry</div></div>
<p>We now have everything to securely authenticate an Entry and its Payload. As we can see, this is already better than the Penguin-Postcard-Protocol!</p>
<p>With all of this together the Entry contains: <code>author</code>, <code>signature</code>, <code>payload_hash</code> and <code>payload_size</code> - and there is even more coming!</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="time">Time<a href="#time" class="hash-link" aria-label="Direct link to Time" title="Direct link to Time">​</a></h2>
<p>Mr. Penguin’s postcard has a date printed on it: The delivery service of the postcards stamps it on every card as soon as they receive it.</p>
<p>But again, can we trust the delivery service to not just stamp an arbitrary date on the card? Was it really the <code>10.08.2022</code> this postcard was seen first?</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>Icebears philosophical beard</div><div class="admonitionContent_BuS1"><p>Time on computers is funny (or time in general). How does the computer know what time it is? Usually it just starts counting from one point and from there one some small quartz crystal is just ticking the time further, hopefully not getting too out of sync with the clocks of other devices. The computer even has a small battery for that quartz crystal so it can keep on ticking when it is turned off. Computers connected with the internet usually sync themselves regularly to some sort of central time service, to prevent the delay getting too horrible.</p><p>When it gets really important we <em>want</em> to know the date of something, for example when signing a contract digitally! There is a lot of research in <a href="https://en.wikipedia.org/wiki/Trusted_timestamping" target="_blank" rel="noopener noreferrer">Secure Time-stamping</a> which addresses this problem with computers.</p><p>Interestingly the Bamboo specification was inspired by a thesis on Secure Time-stamping, read it <a href="https://www.researchgate.net/publication/216824681_Secure_and_Efficient_Time-Stamping_Systems" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div>
<p>We could add a field to Entry to provide a date, similar to the postcard, but first of all, the computer might not even know the right time and even worse, do we trust the claimed date on an Entry from someone else?</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐧</span></span>Computers are still governed by social constructs</div><div class="admonitionContent_BuS1"><p>It is also okay to use timestamps in p2p protocols if we really want them. Sometimes we might just want to use computers together with our friends or we don’t care if someone lied to us. Bamboo and p2panda does not provide that functionality but it would be easy to add on top.</p></div></div>
<p>Bamboo Entries can not solve the problem of <em>absolute</em> time for us as it is simply <em>not possible</em> to do this in a decentralised system, but we can introduce something like a <em>relative</em> time, we can at least prove that an Entry got created <em>after</em> another.</p>
<p>When a new Entry gets created we can point at the previous Entry by calculating the Hash of it and mentioning it in the new Entry. This <strong>Backlink Hash</strong> is stored as the <code>backlink</code>. Through this we form some sort of <em>linked list</em> or <em>chain</em> of entries. The first Entry does not contain a <code>backlink</code>.</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAACCAYAAABhYU3QAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAXUlEQVR4nAFSAK3/ADSFzVJFktSLL4nXQRlyvxRCj9J+QJDYdg+H0hE1hslIRpLVjS6K20gAMInXiTWM2t8vhdV8PojNKTiO2so3jdfKO4LDKziN1nk4j9rgMYnXhzOfKFHxvZKhAAAAAElFTkSuQmCC&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1636" height="364"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/entries-chained-by-backlinks.93f1c7f.1636.png" srcset="/assets/ideal-img/entries-chained-by-backlinks.93f1c7f.1636.png 1636w" alt="Entries chained by backlinks" width="1636" height="364"></noscript></div></div><div class="image-frame-title_UNlE">Entries chained by backlinks</div></div>
<p>Since we are not able to generate hashes without knowing the original data, we can prove that we’ve seen the previous Entry when we created the new one.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>A hash is a hash is a hash</div><div class="admonitionContent_BuS1"><p>Again, similar to <code>payload_hash</code>, that <code>backlink</code> was generated with BLAKE3 using the YASMF container format.</p></div></div>
<p>As soon as we receive an Entry we can recalculate the hashes and verify that the <code>backlink</code> is actually correct. If we receive many entries we have to do this for all of them by <em>walking</em> the Backlink path from last to first Entry. With this we can prove the <em>causal order</em> or <em>relative time</em> of the entries and that they all belong together.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="logs">Logs<a href="#logs" class="hash-link" aria-label="Direct link to Logs" title="Direct link to Logs">​</a></h2>
<p>With Backlinks we come really close to the true nature of Bamboo: It is an <strong>Append-Only Log</strong>! The chained list of entries is also called a <strong>Log</strong> in Bamboo, while the append-only nature stems from the fact that we’re inserting always new entries at the end of it.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>🎍</div><div class="admonitionContent_BuS1"><p>Like logs of bamboo plants growing out of the ground.  🎍 🎍 🎍</p></div></div>
<p>Bamboo allows us to create multiple logs per Author, we just need to give it a unique <strong>Log Id</strong> which is a number starting at <code>0</code>. Through this we can identify which Entries belong to which Log as they keep it as the <code>log_id</code>. Together with the Backlinks we can make sure that they also really stay inside the claimed Log.</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6UlEQVR4nGNgYGBgMO25nmDTf/OcceulAPOOi562E26eNuu+mmzSfsnFdsLNm8ZdN3pA6hgsem6UWfff/Kfdci3OrPdqqM2EWz/12q7V2/efF3CfcsNft/OaEURh341C2wm3Puu1XY0167oaaj/hxkfDzus1FoXHOPW6b5obd91ShijsvZ5uO+HWbeuOk/FuPYcCbCfcOm3cfjHFtOOCu8PEG0+Mum5MBitMm3mGlaH+P9f/Mwxc4ZM251hOuHfcsOt6LkjOfv59Dob6/yxghWBQ/58JbHrreWuHrlOT9RpP+YLF//9nBNEAlLBjAz9BTtkAAAAASUVORK5CYII=&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1852" height="1132"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/multiple-logs.f0422c4.1852.png" srcset="/assets/ideal-img/multiple-logs.f0422c4.1852.png 1852w" alt="Multiple logs" width="1852" height="1132"></noscript></div></div><div class="image-frame-title_UNlE">Multiple logs</div></div>
<p>To check that everything fits together we verify for each incoming Entry that the <code>author</code> and <code>log_id</code> are the same across the whole Log. Every Log can only be maintained by one single Author. This is also the reason why we call Bamboo a <em>Single Writer</em> Append-Only Log.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐧</span></span>Single Writer vs. Multi Writer</div><div class="admonitionContent_BuS1"><p>Now you might think that p2panda can only be used by one Person, but this is not the case! p2panda supports collaborative <em>Multi-Writer</em> settings across Authors and Logs but this is handled outside of Bamboo. Read the <a href="/learn/operations">Operations</a> section to find out more.</p></div></div>
<p>Why do we want to have multiple Logs? It can have different reasons, depending on the protocol we want to design. For example we could have a dedicated Log for postcards from Ms. Penko and another one for boring postcards from the tax authority. Whenever the time comes, we can eventually even delete whole logs without removing all the other, unrelated entries. If we would mix up different sorts of messages within the same log it would be harder to delete it.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="deletion">Deletion<a href="#deletion" class="hash-link" aria-label="Direct link to Deletion" title="Direct link to Deletion">​</a></h2>
<p>With the ever-growing nature of Append-Only Logs we might end up with extremely long lists of Entries which comes with two problems: a) we want to save some space on our hard-disk b) we don’t want to always look at <em>all</em> Backlinks just to verify the integrity of <em>all</em> Entries. This takes too much time!</p>
<p>With Backlinks this is tricky, as removing Entries would mean that we tamper with the integrity of the hashes. Holes in a log can easily be detected and will break the chain, we would need to consider such Bamboo data invalid.</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAbUlEQVR4nGPQbb2Zqtdxc6l83ZXIm4/eSJ988HnGyQdfpv54tVtNvelilF7HrWU67beSGHTab7QYdN26rtR4tezUvY/qJ+6+P3ri3pf9d05N8tRvPtqg333nmnbH9UYGHIBRXNyVW0tLiw0mAgCJQDGfTTx15wAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1636" height="414"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/trying-to-delete-an-entry.cb0b0e6.1636.png" srcset="/assets/ideal-img/trying-to-delete-an-entry.cb0b0e6.1636.png 1636w" alt="Trying to delete an Entry" width="1636" height="414"></noscript></div></div><div class="image-frame-title_UNlE">Trying to delete an Entry</div></div>
<p>We could try to just remove the beginning of a Log instead, this will only break the Backlink for the first Entry which we could say is fine, but how can we now tell that someone didn’t hide some information from us by not sending the whole Log? Before we could at least detect the Entry without a <code>backlink</code> to find out if we reached the beginning of the Log. If we remove that information, we’re lost. In this case we would also need to consider such data invalid.</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAECAYAAAC3OK7NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAo0lEQVR4nGM4/eDz1FP3Pq7ee/ml/sn7Xw7ff3I/06j5YLZu5539xi0XjfQ6bizT6bjex3Dy3ju7k/c+uJ+89lH41INPwS9e3NU1aDxgqtd1M06r/oqEXse1IO22a24MIPD/fz0TiH64J9D1/ykTU4mGl/H6XTcOmLRfNYSbWF9fzwTCIIUZGTFiaZE+Iir1J/hMu65IqEzcxm7Qek5Uq/6KEADy+k70fXpZuQAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="2212" height="822"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/trying-to-delete-beginning-of-log.e6f3233.2212.png" srcset="/assets/ideal-img/trying-to-delete-beginning-of-log.e6f3233.2212.png 2212w" alt="Trying to delete beginning of a Log" width="2212" height="822"></noscript></div></div><div class="image-frame-title_UNlE">Trying to delete beginning of a Log</div></div>
<p>Bamboo solves this problem with a second kind of Hash which is called a <strong>Skiplink</strong>. It allows us to verify the full integrity of the Log even after we’ve deleted some Entries of it.</p>
<p>Skiplinks are formed slightly differently than Backlinks: Instead of_ always_ pointing at the previous Entry they <em>sometimes</em> point at Entries which are more far away in the past. Based on these rules not every Entry needs to contain a Skiplink: For example in a Log with 8 Entries inside only the 4th and 8th Entry would contain a Skiplink.</p>
<p>Skiplinks form an alternative path through the log which is much faster to follow than if we would go through all Backlinks. Also it allows us to delete all Entries which are not on that path.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>Example</div><div class="admonitionContent_BuS1"><p>This means that we can not delete <em>everything</em> if we still want to proof the integrity of the data. We need to keep at least the Entries on the Skiplink path. For example: If we have 8 Entries in a Log, we would need to keep at least 2 of them. If we have 40 Entries we only need 4 and so on. The number of required Entries grows only logarithmic.</p></div></div>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAADCAYAAACqPZ51AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAhElEQVR4nGP4X1/PtL++noWBgYGlvr6e5Up9PRuItrevZ2EIDWXev38/SJyJQa32lGfb5jvxJ2+9iFpw6EGIWcuppL2XXwbtvPAk4sTt17Gd225Fq9SfcWOQrLxo27rzcciFZ1+D5h564qPectn3wI23nntuvA84ee9zWPv2h/6StRdtAWIRPkum5BokAAAAAElFTkSuQmCC&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1274" height="324"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/log-with-skiplinks-and-deleted-entries.ccfb716.1274.png" srcset="/assets/ideal-img/log-with-skiplinks-and-deleted-entries.ccfb716.1274.png 1274w" alt="Log with Skiplinks and deleted Entries" width="1274" height="324"></noscript></div></div><div class="image-frame-title_UNlE">Log with Skiplinks and deleted Entries</div></div>
<p>Another feature of Bamboo is that we can not only delete the Entries but also every Payload, as this data is separated from the Log. This is why we can call Payloads also <em>Off-Chain Data</em>: Maybe our Log contains Entries pointing at many large images we want to delete after a while. It would be possible to delete these images, free up some space - while the Log integrity stays intact.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>Math magic</div><div class="admonitionContent_BuS1"><p>Read about the maths behind Skiplinks in the <a href="https://github.com/AljoschaMeyer/bamboo#links-and-entry-verification" target="_blank" rel="noopener noreferrer">Bamboo specification</a> if you are interested in how it works.</p><p>If you’re interested in the deeper theory of Binary Linking Schemes, you can also read this great <a href="https://aljoscha-meyer.de/linkingschemes" target="_blank" rel="noopener noreferrer">summary</a>.</p></div></div>
<p>Removing Entries or Payloads is not only interesting for freeing up space on our hard-disk but also useful when sending Bamboo Data from one computer to another. The data might still exist on our machine but the other party is not interested in receiving everything. Still the receiver will be able to verify the full integrity of the data. This procedure is called <strong>Sparse Replication</strong>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐧</span></span>Coming up next</div><div class="admonitionContent_BuS1"><p>While we have loads of ideas and draft concepts around <em>Sparse Replication</em> we haven’t implemented it yet in p2panda. Write to us if you are interested in this topic!</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="forks">Forks<a href="#forks" class="hash-link" aria-label="Direct link to Forks" title="Direct link to Forks">​</a></h2>
<p>What happens if we created a log where two Entries contain the same <code>backlink</code>? It would mean that our Log gets split into two branches. This is what we call a <strong>Fork</strong>.</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAxElEQVR4nGPQ7bgeZdh9a6tJ+4Xg//UMTHoTr+fqTbq91LT/vIHhhIvO+pNvr9WacCOUQa/9erBB140l1h2ngo50+vHa515qdcq/csk5+4ilU86ZAKf8y7dtsy7lMMBAUlIpb9KGTt5q9n1tdez7L1WK7rSu4d8bVMdx4E4V0/4chgdrNSRPrHCxYGD4z/L/PwNjqMwxTg+VE3yhDKuY04zPsIYq7eb3UNnGzvBpl6rmg02aziBT6+sZmOBWMDAwQjEYAACIZkgIdMAo8AAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1180" height="580"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/forked-log.dec3033.1180.png" srcset="/assets/ideal-img/forked-log.dec3033.1180.png 1180w" alt="Forked log" width="1180" height="580"></noscript></div></div><div class="image-frame-title_UNlE">Forked log</div></div>
<p>To detect forks, Bamboo introduces the concept of <strong>Sequence Numbers</strong>. Every Entry in the Log gets an unique number, starting at <code>1</code> and growing by <code>1</code> with each new Entry. We store it in an Entry as the <code>seq_num</code>.</p>
<p>This strictly enforced numbering system requires that every Entry is exactly only one step away from the previous one, we can not suddenly jump from Sequence Number <code>2</code> to <code>9</code> for example.</p>
<p>With the help of Sequence Numbers we can now detect forks more easily. We can do this by either detecting: a) duplicate Sequence Numbers b) too large jumps between the Entries Sequence Numbers.</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQklEQVR4nGNggAJ7e3sWDVtbSYYYBm6GNAYuJUtXMWNjHy4GJMBYX/+fCcRIkd4mUyRwcGuR4KENmYLrZcGyUDk4+PefgX1JTrFnGduRExXc+0/mceyWA4n/Z/jPCFZg2H1VXrX9oUtE/xbzncuCzfknvzJSmXjNQqv+CptO6w0Nva7bHlodV+QYdHoe1Jou+v/fqPfeWvPKS3p6/Q/+6vc//OXUukdPv/feMvPF///r9tyvYtBtv6Qk33TTK7h7tcOmhZH2gl1PLNX7zzv41G/i0mu9oKPedsVPrfmCItyN//8zsK7OrXCrYDt2sILz8MEijh1gz8DdyMDwn1ErdBUbw38GxhTp/TL5wnt3Fwjv3ZYksEae4T8Dk3z8fA6QGrBSFQ8Pdh1zJ3EVGxtRUBgy+DBwaTg7C4PCUsnYhR+kCABgVG+zcjL3jwAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="988" height="916"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/invalid-forked-log.11a1665.988.png" srcset="/assets/ideal-img/invalid-forked-log.11a1665.988.png 988w" alt="Invalid forked logs" width="988" height="916"></noscript></div></div><div class="image-frame-title_UNlE">Invalid forked logs</div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>Is it a fork or not?</div><div class="admonitionContent_BuS1"><p>This does not fully prevent us from accidental or malicious forks, we can still imagine scenarios where we will not be able to detect them, for example by hiding the data about the second branch from another person: The fork exists, but they will never see it!</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="tags">Tags<a href="#tags" class="hash-link" aria-label="Direct link to Tags" title="Direct link to Tags">​</a></h2>
<p>We covered it all now. Bamboo entries give us a lot more than postcards: Authentication, Security, Causal Ordering, Deletion, Sparse Replication and Fork Detection!</p>
<p>Now we talked about almost all fields a Bamboo entry contains: <code>author</code>, <code>signature</code>, <code>seq_num</code>, <code>log_id</code>, <code>payload_hash</code>, <code>payload_size</code>, <code>backlink</code> and <code>skiplink</code>.</p>
<p>There is one more field we haven’t mentioned yet which is the <code>tag</code> field. It can be used to indicate if a Bamboo Log ended. The <strong>Tag</strong> is <code>0</code> most of the time, unless when it is indicating the end of the log it is <code>1</code>. Authors are not able to create any new Entries to that Log if the Tag is <code>1</code>.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>Upgrade path</div><div class="admonitionContent_BuS1"><p>This can be used to update Bamboo in the future for example. You can read about this in the <a href="https://github.com/AljoschaMeyer/bamboo#encoding" target="_blank" rel="noopener noreferrer">specification</a>. Since it doesn’t touch upon any p2panda functionality (yet) we did not feature it here.</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="encoding">Encoding<a href="#encoding" class="hash-link" aria-label="Direct link to Encoding" title="Direct link to Encoding">​</a></h2>
<p>Since Bamboo Entries are meant to be used with computers rather than Penguins we need to also specify <em>how</em> a computer should represent them as bytes. We do this by defining an <strong>Encoding</strong>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>What is an Encoding?</div><div class="admonitionContent_BuS1"><p>An Encoding defines how a computer should interpret sequences of bytes to be able to read and write data of some shape. If we come across the following bits: <code>0110 0011 1010 1001</code> we would now need some sort of definition to be able to interpret this? Does this encode a number? An emoji? Or something else?</p></div></div>
<p>In the previous sections we already defined that we use Ed25519 for the Digital Signature Algorithm (<code>author</code> and <code>signature</code>) and BLAKE3 hashes wrapped in the YASMF container format (<code>payload_hash</code>, <code>skiplink</code>, <code>backlink</code>), these are not only definitions of algorithms but also concrete encodings of fixed length!</p>
<p>How do we encode <code>log_id</code> and <code>seq_num</code>? These are numbers and for them Bamboo uses the <a href="https://github.com/AljoschaMeyer/varu64" target="_blank" rel="noopener noreferrer">VarU64</a> encoding.</p>
<p>Now we have everything we need to now except of the order of the data, which is:</p>
<ul>
<li><code>tag</code>, either a zero byte (<code>0x00</code>) to indicate a regular log entry, or a one byte (<code>0x01</code>)  to indicate an end-of-log marker</li>
<li><code>author</code>, the 32 bytes that make up the ed25519 public key of the log&#x27;s author</li>
<li><code>log_id</code>, the 64 bit integer that serves to distinguish different logs by the same author, encoded as VarU64</li>
<li><code>seq_num</code>, the sequence number of the entry, encoded as VarU64</li>
<li><code>skiplink</code>, the hash of an older log entry, encoded as yasmf-hash</li>
<li><code>backlink</code>, the hash of the previous log entry, encoded as yasmf-hash</li>
<li><code>payload_size</code>, the size of the payload, encoded as VarU64</li>
<li><code>payload_hash</code>, the hash of the payload, encoded as yasmf-hash</li>
<li><code>signature</code>, the signature obtained from signing the data with the author&#x27;s private key (64 bytes)</li>
</ul>
<p>Let’s look at this binary data here, this <em>is</em> an Entry! This data is what every computer writes or reads when working with Bamboo:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">10011100110110110011101010001100000011000100101100110000100000010111001111010100110000111100010000111010011001111010011011010000000100110100010001001010111110011001101011001011100010111110011011000101001001000010001101110100011011011001101010100010110000010000000100000001101111000000000000100000011101011001011110101010011010000000101001111111011000011001110101110010111011000100010000010000101110110011101000001010111101001011110010110110011001010000100111100100001111000001110111011110110001110000101111101110111111010100101100010101100011110101110000011010000010000011011010010111010110101000101000100011110110010010111001111111111100111101001000110111010000101101111110110100101001011100010001000111101100101110111101111011100001101111110100010000011000110111010000111011101001101011101101010000111000001101110111001110111111110111110100111000000101001000001001011010101011110011010111001111000111010010001010001000000001100001111111001111111111110000000000110111010110111001000111011100111111000011100011111001010001011010011110011000110100011000000100001010</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It is a little bit too hard to read, so we convert the binary numbers to hexadecimal ones:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">009cdb3a8c0c4b308173d4c3c43a67a6d013444af99acb8be6c52423746d9aa2c10101bc00207597aa680a7f619d72ec4410bb3a0af4bcb66509e43c1ddec70beefd4b158f5c1a0836975a8a23d92e7ff3d23742dfb4a5c447b2ef7b86fd1063743ba6bb50e0ddceff7d3814825aaf35cf1d2288061fcfff00375b91dcfc38f945a798d1810a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>Number systems</div><div class="admonitionContent_BuS1"><p>Most of the time we are surrounded by decimal numbers like <code>114</code> but we can also represent them in different systems, for example binary (<code>1110010</code>) or hexadecimal (<code>72</code>), the latter is used a lot by humans to save some space when looking at data, computers are already very happy with the binary representation.</p></div></div>
<p>This is still hard to read but knowing the Bamboo encoding and the length of all items we should be able to take this apart:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token comment" style="color:#66cccc"># Tag</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">00</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token comment" style="color:#66cccc"># Author (ed25519 public key)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">9cdb3a8c0c4b308173d4c3c43a67a6d013444af99acb8be6c52423746d9aa2c1</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token comment" style="color:#66cccc"># Log id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">01 </span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token comment" style="color:#66cccc"># Sequence number (it is the first entry in the log!)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">01</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token comment" style="color:#66cccc"># Skiplink and Backlink omitted as it is the first Entry!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token comment" style="color:#66cccc"># Payload size (188 bytes apparently)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">bc</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token comment" style="color:#66cccc"># Payload hash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">00207597aa680a7f619d72ec4410bb3a0af4bcb66509e43c1ddec70beefd4b158f5c </span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token comment" style="color:#66cccc"># Signature</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">1a0836975a8a23d92e7ff3d23742dfb4a5c447b2ef7b86fd1063743ba6bb50e0ddceff7d3814825aaf35cf1d2288061fcfff00375b91dcfc38f945a798d1810a</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="next-up">Next up<a href="#next-up" class="hash-link" aria-label="Direct link to Next up" title="Direct link to Next up">​</a></h2>
<p>The Payload of Entries are <strong>Operations</strong> in p2panda. Operations give more features on top of Bamboo, for example <em>Multi-Writer</em> updates for collaboration on the same data across Logs and Authors, <em>Encryption</em> and <em>Conflict-free Replicated Data Types</em> (CRDTs). Read more about them <a href="/learn/operations">next</a>.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/learn/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/learn/operations"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Operations and Documents</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#trust-is-funny" class="table-of-contents__link toc-highlight">Trust is funny</a></li><li><a href="#bamboo" class="table-of-contents__link toc-highlight">Bamboo</a><ul><li><a href="#does-the-entry-really-point-at-this-particular-payload" class="table-of-contents__link toc-highlight">Does the Entry really point at this particular Payload?</a></li><li><a href="#what-if-the-entry-got-changed" class="table-of-contents__link toc-highlight">What if the Entry got changed?</a></li><li><a href="#how-do-we-know-the-signature-really-belongs-to-the-author" class="table-of-contents__link toc-highlight">How do we know the Signature really belongs to the Author?</a></li></ul></li><li><a href="#time" class="table-of-contents__link toc-highlight">Time</a></li><li><a href="#logs" class="table-of-contents__link toc-highlight">Logs</a></li><li><a href="#deletion" class="table-of-contents__link toc-highlight">Deletion</a></li><li><a href="#forks" class="table-of-contents__link toc-highlight">Forks</a></li><li><a href="#tags" class="table-of-contents__link toc-highlight">Tags</a></li><li><a href="#encoding" class="table-of-contents__link toc-highlight">Encoding</a></li><li><a href="#next-up" class="table-of-contents__link toc-highlight">Next up</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer_J6tW"><img class="footer-img__0Xc" src="/images/deepsea-panda.svg" width="100"><div><img class="supporters-img_P2oV" src="/images/nlnet-logo.svg" width="140"><img class="supporters-img_P2oV" src="/images/ngi-logo.png" width="200"><img class="supporters-img_P2oV" src="/images/eu-flag-logo.png" width="78"><p class="footer-text_MXRq">This project has received funding from the European Union’s Horizon 2020 research and innovation programme within the framework of the NGI-POINTER Project funded under grant agreement No 871528, NGI-ASSURE No 957073 and NGI0-ENTRUST No 101069594</p></div><p class="footer-text_MXRq">CC BY-SA 4.0<!-- --> - <a href="/contact">Contact</a> -<!-- --> <a href="https://autonomous.zone/@p2panda" target="_blank" rel="noreferrer">Fediverse</a></p></footer></div>
</body>
</html>