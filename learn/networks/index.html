<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-learn/networks" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Networks | p2panda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://p2panda.org/learn/networks"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Networks | p2panda"><meta data-rh="true" name="description" content="In p2panda we need at least two participants to call it a party: We need a Client and a Node. Okay, they don’t sound like the most fun party guests, but we promise you, they are cool!"><meta data-rh="true" property="og:description" content="In p2panda we need at least two participants to call it a party: We need a Client and a Node. Okay, they don’t sound like the most fun party guests, but we promise you, they are cool!"><link data-rh="true" rel="icon" href="/images/deepsea-panda.svg"><link data-rh="true" rel="canonical" href="https://p2panda.org/learn/networks"><link data-rh="true" rel="alternate" href="https://p2panda.org/learn/networks" hreflang="en"><link data-rh="true" rel="alternate" href="https://p2panda.org/learn/networks" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="p2panda News RSS Feed"><link rel="stylesheet" href="/assets/css/styles.862b1275.css">
<script src="/assets/js/runtime~main.ce7fda3c.js" defer="defer"></script>
<script src="/assets/js/main.97848bd4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><div class="navbar__brand"><div class="navbar__logo"><img src="/images/p2panda-book.png" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/images/p2panda-book.png" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></div></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/about/">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/learn/">Learn</a><a class="navbar__item navbar__link" href="/tutorials/">Tutorials</a><a class="navbar__item navbar__link" href="/sdks/">SDKs</a><a class="navbar__item navbar__link" href="/specifications/">Specifications</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/faq">FAQ</a><a class="navbar__item navbar__link" href="/links">Links</a><a class="navbar__item navbar__link" href="/contact">Contact</a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedComponent_mlkZ themedComponent--dark_xIcU"></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/learn/">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/learn/entries">Entries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/learn/operations">Operations and Documents</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/learn/networks">Networks</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><img src="/images/deepsea-panda.svg" width="30" class="icon-home_wWeS"></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Networks</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Networks</h1></header><p>In p2panda we need at least two participants to call it a party: We need a <strong>Client</strong> and a <strong>Node</strong>. Okay, they don’t sound like the most fun party guests, but we promise you, they are cool!</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/UlEQVR4nGP4//8/IwMDA8PHySeFv3cfdvjSvT/2efdO7i99ZyR/9h7T/dy6RxwkDwb/JxwX/995RB2M2w/4/m/bqPK/bbfwt46D8d8699l/bNstzBD6fxXz/9YjmYXz1yxj3DRrv+/8NdaxHVcvqnXc6AIZ8qn3QOCP7oPeDK/796r/LzkpEbZkVa/i+oV/k+etCdfvuP0gpPvq8f8T9oh/6twf8LVtnznDt+5DsT869nn/bz4ou75/u8L/rgNxa1sOSv7sOWD4t/tgy5eeA4b/Z55hZfhfv58FZMWH+h1C/yZuY//cfdDpf89+kR9tu9Ue1e8QOpM2kxXkYQDkU4OHvtulGAAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1516" height="892"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/client-and-node-at-a-party.ab1678c.1516.png" srcset="/assets/ideal-img/client-and-node-at-a-party.ab1678c.1516.png 1516w" alt="Client and Node at a party" width="1516" height="892"></noscript></div></div><div class="image-frame-title_UNlE">Client and Node at a party</div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="clients">Clients<a href="#clients" class="hash-link" aria-label="Direct link to Clients" title="Direct link to Clients">​</a></h2>
<p>Clients are programs which read or write data from Nodes. To write data they need to sign it before, which means that they have to also hold a <strong>Private Key</strong> somewhere safely.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="reading">Reading<a href="#reading" class="hash-link" aria-label="Direct link to Reading" title="Direct link to Reading">​</a></h3>
<p>Reading from them is fairly easy: We just need to send a GraphQL query like that:</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token property">all_mushroom_0020</span><span class="token operator" style="color:#f2f0ec">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token object">documents</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      </span><span class="token object">fields</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">        </span><span class="token property">title</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">        </span><span class="token property">edible</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">        </span><span class="token property">description</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">        </span><span class="token property">latin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If our Node knows something about <code>mushroom</code> Schemas, then we would get a response now. The Client can render the result in a user interface or process that information somehow.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>Learn more</div><div class="admonitionContent_BuS1"><p>If you haven’t read about Schemas yet, we can recommend reading the previous learn chapter about <a href="/learn/operations">Operations and Documents</a>. Or you might even want to directly <a href="/tutorials/send-to-node">create your own Schemas</a> in the tutorial!</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐧</span></span>Do not forget the bots</div><div class="admonitionContent_BuS1"><p>Not every Client needs to be used by a human. Clients can also be automated bots which operate in a p2panda network.</p></div></div>
<p>This already tells us something important about Clients and Nodes: Nodes are the part of the network which <em>store</em> the data for us. This is why we can query something from them as Clients!</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="writing">Writing<a href="#writing" class="hash-link" aria-label="Direct link to Writing" title="Direct link to Writing">​</a></h3>
<p>Since the data lives on a Node, we should also send our new data to them, whenever we create something. This again can be done with a GraphQL mutation, for example like that:</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">mutation</span><span class="token plain"> </span><span class="token definition-mutation function" style="color:#66cccc;font-weight:bold">Publish</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token variable variable-input variable-input" style="color:#f2f0ec">$entry</span><span class="token punctuation" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#f2f0ec">!</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> </span><span class="token variable variable-input variable-input" style="color:#f2f0ec">$operation</span><span class="token punctuation" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token scalar">String</span><span class="token operator" style="color:#f2f0ec">!</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token property-query property-mutation property-mutation">publish</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token attr-name" style="color:#f2f0ec">entry</span><span class="token punctuation" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token variable variable-input variable-input" style="color:#f2f0ec">$entry</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> </span><span class="token attr-name" style="color:#f2f0ec">operation</span><span class="token punctuation" style="color:#f2f0ec">:</span><span class="token plain"> </span><span class="token variable variable-input variable-input" style="color:#f2f0ec">$operation</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token property">logId</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token property">seqNum</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token property">backlink</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token property">skiplink</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We’re sending a Node an <strong>Entry</strong> and <strong>Operation</strong>, these are the essential data types of p2panda.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>What is this response?</div><div class="admonitionContent_BuS1"><p>The node optimistically responds to us with data containing <code>logId</code>, <code>seqNum</code>, <code>backlink</code> and <code>skiplink</code>, which are arguments we can use to create our next Entry.</p></div></div>
<p>Entries need to be signed by a <strong>Key Pair</strong> which only the Client knows about before it is being sent to a Node. This <strong>Signature</strong> proves that the Client was the original creator of this Operation and ensures that it can not be changed afterwards anymore.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>Learn more</div><div class="admonitionContent_BuS1"><p>You can read everything about Entries, Key Pairs and Signatures in the regarding <a href="/learn/entries">Bamboo Entry</a> learn section. If you’re curious about Operations, then we have you covered with the <a href="/learn/operations">Operations &amp; Documents</a> learn section.</p></div></div>
<p>Whenever a Client wants to <em>write</em> data to a Node, it needs to keep the <strong>Private Key</strong> of the Key Pair safely stored. This is an important trait of Clients: They are the <em>holders</em> of a private key. Nodes will never know about them!</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="nodes">Nodes<a href="#nodes" class="hash-link" aria-label="Direct link to Nodes" title="Direct link to Nodes">​</a></h2>
<p>Nodes do much more than Clients! They are the actual participants in the network, validate the data, store it, materialise it, find other nodes to distribute the data even further.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="validation">Validation<a href="#validation" class="hash-link" aria-label="Direct link to Validation" title="Direct link to Validation">​</a></h3>
<p>Every Node checks the Entry and Operation the Client signed, encoded and sent to it. It validates a couple of things:</p>
<ul>
<li>Was the Entry and Operation correctly formatted?</li>
<li>Is the Signature of the Entry valid?</li>
<li>Does the Operation really belong to this Entry?</li>
<li>Did the Operation fulfil the claimed Schema?</li>
<li>.. and much more!</li>
</ul>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="persistence">Persistence<a href="#persistence" class="hash-link" aria-label="Direct link to Persistence" title="Direct link to Persistence">​</a></h3>
<p>After all the data has been checked it finally can be stored in the database of the Node. Nodes are the **Persistence **layers of the p2panda network.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>Database-agnostic specification</div><div class="admonitionContent_BuS1"><p>The p2panda specification does not prescribe <em>how</em> you want to store the data. In our reference implementation <code>aquadoggo</code> we’re using PostgreSQL or SQLite, but you could also take something else if you want to build your own Node.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="materialisation">Materialisation<a href="#materialisation" class="hash-link" aria-label="Direct link to Materialisation" title="Direct link to Materialisation">​</a></h3>
<p>The data the Node received and stored from the Client is still in a very raw form and needs to be processed. We did not query Operations but Mushrooms in your example above!</p>
<p>Operations just describe <em>changes</em> of data but not the final state of the data in the end. These final results we call <strong>Documents</strong>. This is also the data we want to query as a client. But first our Node needs to prepare them to look like that!</p>
<p>To get from raw Operations to Documents, we apply <strong>Materialisation</strong>. This is where the heavy work begins: Nodes need to look at all Operations which form Documents together, run the Materialisation algorithm and store that state in the database again.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>Thank you for your hard work</div><div class="admonitionContent_BuS1"><p>This is one of the main reasons why p2panda separates Clients from Nodes: Materialisation can take time and resources from your computer and especially in Browsers it might get slow. If we separate the processes from each other we get a lightweight, fast Client (and a happy Human using it) and move the work into the <em>background</em> to the Node.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="discovery">Discovery<a href="#discovery" class="hash-link" aria-label="Direct link to Discovery" title="Direct link to Discovery">​</a></h3>
<p>Nodes are so cool, they can do even more! They walk around during the party and try to see if there are other Nodes hanging around.</p>
<p>This process we call <strong>Discovery</strong>, it basically means that Nodes try to find other Nodes inside of the network.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>Can someone please fix the internet?</div><div class="admonitionContent_BuS1"><p>Discovery is quite tricky and one of the main challenges for p2p networks. The reason for this is that the internet has grown faster than expected, leading to a shortage of IPv4 addresses. Usually our smartphones, laptops, computers, etc. are all connected to the local WiFi network - but that would mean that each of them would need to get an unique IP address, and these are very rare! To circumvent that problem <a href="https://tailscale.com/blog/how-nat-traversal-works/" target="_blank" rel="noopener noreferrer">NAT traversal</a> mechanisms have been invented which translate one <em>global</em> IP address to multiple ones in your local network. Because of this translation it is hard to find out from the outside how we can connect to that smartphone behind the NAT. At the end of the day, we want to build a <em>peer-to-peer</em> network, we want to <em>directly</em> connect to that device!</p></div></div>
<p>There are different techniques to achieve this, on a local network we can simply just <em>broadcast</em> a message and say something like: “Hello, I’m a Node and I’m here”. Other Nodes will pick these messages up and learn about that Node. That would be the equivalent of screaming every 2 seconds at a party, telling everyone else that we’re still there. Sounds quite annoying, but it works! This technique is called <strong>mDNS</strong>, or <a href="https://en.wikipedia.org/wiki/Multicast_DNS" target="_blank" rel="noopener noreferrer">Multicast DNS</a>.</p>
<p>If we’re leaving the local network and we still want to discover other Nodes it gets a little more tricky. Usually we can solve this with some sort of dedicated <strong>Signalling</strong> server (or a couple of them), which help us to announce that our Node entered the network. Other Nodes can look these announcements up by calling that server. We can think about them a little bit like telephone books where we can look up phone numbers.</p>
<p>Another technique of getting to know some other Nodes at a party is to enter it with already knowing one Node friend who will be there. That Node friend can tell you about the other friends they know about. If you continue asking all friends about <em>their</em> regarding friends you will probably end up with knowing all Nodes at the party. This approach is based on a <strong>Gossip Protocol</strong> and does not need a central server. But you need to know someone already before you enter the party!</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>What discovery protocol do we use?</div><div class="admonitionContent_BuS1"><p>In our current <code>aquadoggo</code> implementation we use mDNS for local networks and a rendesvouz server to find other nodes on the internet. You can read more about it in our <a href="/specifications/aquadoggo/networking">specification</a>.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="replication">Replication<a href="#replication" class="hash-link" aria-label="Direct link to Replication" title="Direct link to Replication">​</a></h3>
<p>Okay, but now back to our Node! What do Nodes do when they finally meet each other? They start <strong>Replication</strong>! This is the process of sharing the data they know about.</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAJCAYAAAALpr0TAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFUlEQVR4nGWPP0vDQBjG31qomnQXQXDpFCFpL23NllINOHS9Lavn0GLBP5R28IJL7nIdXbL6EfwoYu4Sv0zlvSIOHjzw8OPHc7wQKDPxVT0FfJwfAEDLhtsORNXTi9xMYCibzUiZDKGfpG4YzpyzKDr2k0cX2VhVr0Q0ayBbs7xUeoXwJEnd8zg+wpzOmLMXzTOR1RICYe5IrucIPco7lNI2UNrGjizI9TyQhgERek2kfvm3GO4XQ1llA/W9AiIbNlZ6gZDyty5Kvd7NIeW8a0XxtSBFcwt9Ye5JUT0hZGXpeB7tYFL1bo8ZFPoBHVzcEFnbr1n5YUVc/BVDabI+Xj2UOh5tq6vdDlqM/y1iRxYVn9fo/AADSmtp+GXp+AAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="1322" height="1132"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/typical-conversation-between-two-nodes.a14426a.1322.png" srcset="/assets/ideal-img/typical-conversation-between-two-nodes.a14426a.1322.png 1322w" alt="A typical conversation between two Nodes" width="1322" height="1132"></noscript></div></div><div class="image-frame-title_UNlE">A typical conversation between two Nodes</div></div>
<p>Replication makes sure that data spreads across the decentralised network. This means that not all Nodes know <em>everything</em> at <em>the same time</em>. They might only get to know some data later, or maybe never! This makes p2panda an <strong>Eventually Consistent Database</strong>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>What replication protocol do we use?</div><div class="admonitionContent_BuS1"><p>Read about our replication protocol in our <a href="/specifications/aquadoggo/replication">specification</a>.</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="decentralisation--federation">Decentralisation &amp; Federation<a href="#decentralisation--federation" class="hash-link" aria-label="Direct link to Decentralisation &amp; Federation" title="Direct link to Decentralisation &amp; Federation">​</a></h2>
<p>We’ve seen now the relationship between Clients and Nodes. Clients are the <em>creators</em> and <em>consumers</em> of data while Nodes take care of the rest.</p>
<p>Since Clients only need to talk via GraphQL to a Node they can be easily implemented without much effort.</p>
<p>We can now imagine all sorts of clients: An <a href="/tutorials/mushroom-app">mushrooming app</a>, a <a href="https://github.com/p2panda/zoo-adventures" target="_blank" rel="noopener noreferrer">computer game</a> or a cool <a href="https://github.com/p2panda/festival-tool" target="_blank" rel="noopener noreferrer">festival tool</a> to set up events. They can run as web applications in the browser or can be implemented as native applications, also running on mobile phones.</p>
<p>But how do we implement a Node? The good news is: There is already one reference implementation called <a href="/tutorials/aquadoggo"><code>aquadoggo</code></a>and since Nodes are <em>agnostic</em> to the data they process, you probably can just use this one. It gets even better: Nodes can support all sorts of applications as long as they know about the Schema the application needs!</p>
<p>This gives us quite many options now on how to deal with the Node: We can host it on a server on the internet and simply just allow many clients to talk to it. This is what we would call a <strong>Federated Node</strong>. It is a Node shared with many clients.</p>
<p>We could also host the Node directly on our computer, for example just as a running program, or even a <a href="https://en.wikipedia.org/wiki/Daemon_(computing)" target="_blank" rel="noopener noreferrer">background process</a> which automatically launches as soon as we’ve started our computer. This is what we would call a **Decentralised Node **as it is not shared and runs <em>locally</em> on your device. But this would require you to understand quite a bit about computers and we can’t assume that everyone will do the same.</p>
<p>We can also <em>embed</em> the Node directly next to the Client and ship it all bundled in one program! This is the <em>easiest</em> method for the users, as they can just install the application and will get a Node for free without worrying too much about it.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>Container with web view</div><div class="admonitionContent_BuS1"><p>With cool frameworks like <a href="https://tauri.app/" target="_blank" rel="noopener noreferrer">Tauri</a> we can easily embed <code>aquadoggo</code> and have a JavaScript web view Client in front of it.</p></div></div>
<p>For whatever <strong>Network Topology</strong> you decide: All Nodes will always be able to communicate to each other whenever they want to. It does not matter if you decided to host yours in a federated or decentralised manner.</p>
<div class="image-frame_fg61"><div class="image-frame-inner_Xabn"><div style="background-size:cover;background-repeat:no-repeat;position:relative;background-image:url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAwUlEQVR4nGNg+P+fkYGBgUF+Vr+B8pReFY1ZC9UUV8wJZmBgYFJPKuUF0SB5Bnn7eI5QBgZm1VktBipLV0Vbdl8MqWivEFRdPjtIfFG3mAcDAztIDUgto0/aJi6L2YtUdNfMsDNuvqxs0n7VxXfKSW3dOdtLtbLseRgY6lnApppMu+ipv3RjjtK6aZ5as1cJqS1b5KG5cLWh4ZItdlpX6tnAihgYQpm13EKF9NPTpbWmTOEBiWi0VEkqdXTwQxWAAQDF8DZZRFvG/wAAAABJRU5ErkJggg==&quot;)"><svg style="width:100%;height:auto;max-width:100%;margin-bottom:-4px" width="2754" height="1348"></svg><noscript><img style="width:100%;height:auto;max-width:100%;margin-bottom:-4px;position:absolute;top:0;left:0" src="/assets/ideal-img/network-topologies.2920ef5.2754.png" srcset="/assets/ideal-img/network-topologies.2920ef5.2754.png 2754w" alt="Different network topologies with federated or decentralised Nodes" width="2754" height="1348"></noscript></div></div><div class="image-frame-title_UNlE">Different network topologies with federated or decentralised Nodes</div></div>
<p>Similar to the Replication and Discovery, deciding on an approach has different implications: Sharing a Node with others comes with much more responsibility but easier access. Users can just open a website and directly interact with the p2panda network! Having your own local node is practical if you want to be able to be <em>offline</em> and still use your Client. Also you will have your data in exactly your place.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/learn/operations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Operations and Documents</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#clients" class="table-of-contents__link toc-highlight">Clients</a><ul><li><a href="#reading" class="table-of-contents__link toc-highlight">Reading</a></li><li><a href="#writing" class="table-of-contents__link toc-highlight">Writing</a></li></ul></li><li><a href="#nodes" class="table-of-contents__link toc-highlight">Nodes</a><ul><li><a href="#validation" class="table-of-contents__link toc-highlight">Validation</a></li><li><a href="#persistence" class="table-of-contents__link toc-highlight">Persistence</a></li><li><a href="#materialisation" class="table-of-contents__link toc-highlight">Materialisation</a></li><li><a href="#discovery" class="table-of-contents__link toc-highlight">Discovery</a></li><li><a href="#replication" class="table-of-contents__link toc-highlight">Replication</a></li></ul></li><li><a href="#decentralisation--federation" class="table-of-contents__link toc-highlight">Decentralisation &amp; Federation</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer_J6tW"><img class="footer-img__0Xc" src="/images/deepsea-panda.svg" width="100"><div><img class="supporters-img_P2oV" src="/images/nlnet-logo.svg" width="140"><img class="supporters-img_P2oV" src="/images/ngi-logo.png" width="200"><img class="supporters-img_P2oV" src="/images/eu-flag-logo.png" width="78"><p class="footer-text_MXRq">This project has received funding from the European Union’s Horizon 2020 research and innovation programme within the framework of the NGI-POINTER Project funded under grant agreement No 871528, NGI-ASSURE No 957073 and NGI0-ENTRUST No 101069594</p></div><p class="footer-text_MXRq">CC BY-SA 4.0<!-- --> - <a href="/contact">Contact</a> -<!-- --> <a href="https://autonomous.zone/@p2panda" target="_blank" rel="noreferrer">Fediverse</a></p></footer></div>
</body>
</html>