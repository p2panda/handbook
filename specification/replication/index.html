<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-specification/replication">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Replication | p2panda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://p2panda.org/specification/replication"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Replication | p2panda"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/images/deepsea-panda.svg"><link data-rh="true" rel="canonical" href="https://p2panda.org/specification/replication"><link data-rh="true" rel="alternate" href="https://p2panda.org/specification/replication" hreflang="en"><link data-rh="true" rel="alternate" href="https://p2panda.org/specification/replication" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.de076f58.css">
<link rel="preload" href="/assets/js/runtime~main.e77259a2.js" as="script">
<link rel="preload" href="/assets/js/main.125a03bc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><div class="navbar__brand"><div class="navbar__logo"><img src="/images/p2panda-book.png" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/p2panda-book.png" class="themedImage_ToTc themedImage--dark_i4oU"></div></div></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/about/">About</a><a class="navbar__item navbar__link" href="/learn/">Learn</a><a class="navbar__item navbar__link" href="/tutorials/">Tutorials</a><a class="navbar__item navbar__link" href="/libraries/">Libraries</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/specification/">Specification</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/faq">FAQ</a><a class="navbar__item navbar__link" href="/links">Links</a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedImage_ToTc themedImage--dark_i4oU"></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/key-concepts">Key Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/specification/data-types/bamboo">Core data types</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/authorisation">Authorisation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/encryption">Encryption</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/specification/APIs/overview">APIs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/specification/networking/clients-nodes">Networking</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/specification/replication">Replication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/encoding-data">Canonic Encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/glossary">Glossary</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><img src="/images/deepsea-panda.svg" width="30" class="icon-home_wWeS"></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Replication</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Replication</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">​</a></h2><ul><li>A core data type of p2panda are <a href="/specification/data-types/bamboo">bamboo</a> append-only logs which contain sequences of application events. We build multi-writer <a href="/specification/data-types/documents">documents</a> on top of these logs.</li><li>Append-only logs are very useful in a p2p setting for achieving eventual consistency of data between peers on the network. Remotely connected peers can perform a simple log-height negotiation and then exchange only the data the other peer is missing.</li><li>This document specifies how p2panda implements and expands on this replication protocol, including an announcement layer and efficient synchronization of multiple logs.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="assumptions">Assumptions<a class="hash-link" href="#assumptions" title="Direct link to heading">​</a></h3><ul><li>This document makes a number of assumptions on subjects outside of it&#x27;s scope. These include:<ul><li>Discovery: it is assumed peers can discover the addresses of other peers on their network.</li><li>Connectivity: it is assumed that peers can establish reliable, ordered and bi-directional transport channels</li></ul></li><li>p2panda uses the <code>libp2p</code> framework for discovery and other p2p networking mechanisms with QUIC as the transport. Further details are given in the <a href="/specification/networking">networking</a> section.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="encoding">Encoding<a class="hash-link" href="#encoding" title="Direct link to heading">​</a></h2><ul><li>p2panda uses CBOR for encoding all replication messages.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="1-announcement">1. Announcement<a class="hash-link" href="#1-announcement" title="Direct link to heading">​</a></h2><ul><li>The goal of replication is two peers converging to the same state, over data they are mutually interested in. This involves some sort of announcement mechanisms which aids finding peers who are interested in the same data.</li><li>Data in a p2panda network can be categorised in form of schemas. Schemas are dedicated to support specific applications. A node expresses its support of an application by supporting the required schemas, trying to actively find and gather all new data from them.</li><li>Before two peers begin the replication process they must first identify other peers which may hold data they are interested in.</li><li>To do this they publish an <code>Announce</code> message which contains the schemas that they support. Doing this is like saying &quot;I am interested in receiving and sharing any data associated with these <a href="/specification/data-types/schemas">schemas</a>&quot;.</li><li>Throughout this document we introduce two exemplary peers, Peer A and Peer B, which replicate with each other:<ul><li>Peer A has a set A of <a href="/specification/data-types/documents">documents</a> of <a href="/specification/data-types/schemas">schemas</a> S</li><li>Peer B has another, diverging set B of documents of schema S</li><li>Peer A announces they are interested in documents of schema S by publishing an <code>Announce</code> message</li><li>Peer B eventually receives the <code>Announce</code> message from Peer A, comparing it to its own interest</li></ul></li><li>Peers can actively <em>push</em> data to other peers who announced their interest</li><li>Peers do not need to publish <code>Announce</code> messages to the network to participate in replication. They can still actively monitor announcements on the network and establish connection as soon as they see fit.</li><li>The mechanism for sending and receiving announcement messages in the network is out of scope of this document, a very suitable pattern is publish-subscribe.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="announce-message"><code>Announce</code> message<a class="hash-link" href="#announce-message" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[&lt;version {u64}&gt;, &lt;timestamp {u64}&gt;, [&lt;schema_id {string}&gt;, ...]]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>version</code> is the version of the replication protocol the peer supports, all following messages and mechanisms are related to that version. The first version is <code>1</code>.
<code>timestamp</code> represents the UNIX timestamp of the moment the announcement message has been created. Strictly speaking it does not need to be a real timestamp but MUST always be larger than the previously published one.
<code>schema_id[]</code> is a list of <a href="/specification/data-types/schemas">schemas</a> ids the peer is announcing its interest in.</p><ul><li>Every peer is represented by exactly only one announcement state. On arrival of a new <code>Announce</code> message the previous state gets replaced with the latest one.</li><li>To understand which <code>Announce</code> message is the latest, the receiving peer compares the new <code>timestamp</code> with the current one. If an <code>Announce</code> message arrived with a smaller or equal <code>timestamp</code> it gets ignored, if it is larger the new state replaces the old one.</li><li>Through this peers can safely broadcast announcements while still making sure that the order is preserved, even when messages arrive out-of-order or too late.</li><li>Peers can &quot;unannounce&quot; their interest in certain data by removing the <a href="/specification/data-types/schemas">schemas</a> id in the new announcement messages. They can remove all announcements by simply sending an announcement message without any <a href="/specification/data-types/schemas">schemas</a> ids.</li><li>In the future this message can also include additional parameters, where data can be included or excluded based on the public key of an author or a certain sub-set of the data based on <a href="/specification/data-types/documents">documents</a> ids, even specific requirements like text searches are imaginable (&quot;I&#x27;m interested in data containing the word x in <a href="/specification/data-types/schemas">schemas</a> S&quot;), similar to the filters of the current <a href="/specification/data-types/documents">documents</a> GraphQL API.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="2-replication">2. Replication<a class="hash-link" href="#2-replication" title="Direct link to heading">​</a></h2><ul><li>Replication is the process of two peers synchronizing the data they hold locally, eventually arriving at the state where both peers hold the same data.</li><li>In p2panda this mechanism is initiated by a <code>SyncRequest</code> message and is then followed by two distinct replication phases:<ol><li>Identification of the diverging state</li><li>Exchange of data.</li></ol></li><li>After learning about the other peers interests through the <code>Announce</code> message, Peer B can initiate replication with Peer A by sending a message to initiate replication. This replication session can concern a sub-set of the announced schemas.</li><li>Over time many replication session can take place following one announcement, individually concerning different sub-sets of the announcement.</li><li>Peer A and Peer B can have multiple sync sessions at the same time.</li><li>If an already existing sync session was requested between the same peers concerning the same schemas, it gets ignored.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="syncrequest-message"><code>SyncRequest</code> message<a class="hash-link" href="#syncrequest-message" title="Direct link to heading">​</a></h3><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;message_type=0 {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;session_id {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;mode {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    [&lt;schema_id {string}&gt;, ...]</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p><code>message_type</code> is <code>0</code>.</p></li><li><p><code>mode</code> where <code>0</code> is Log Height mode and <code>1</code> is using Set Reconciliation mode</p></li><li><p><code>session_id</code> is an identifier used throughout the replication session to identify messages for this session. This helps the peers to connect the messages to the right session, especially when multiple sessions take place at the same time with the same peer. The session id starts with <code>0</code> and is incremented by <code>1</code> for every session and every peer. Session IDs can be reset after enough time of inactivity between two peers and usually don&#x27;t need to be persisted.</p></li><li><p><code>schema_id[]</code> allows us to identify the range of <a href="/specification/data-types/documents">documents</a> we are interested in synchronizing (ie. all <a href="/specification/data-types/documents">documents</a> associated with this set of schemas).</p></li><li><p>Every item in this list needs to be contained in the latest announcement state. If one <a href="/specification/data-types/schemas">schemas</a> id inside the <code>SyncRequest</code> message of Peer B is not part of the announcement of Peer A, the request gets ignored.</p></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="21-identifying-divergent-state">2.1. Identifying divergent state<a class="hash-link" href="#21-identifying-divergent-state" title="Direct link to heading">​</a></h3><ul><li>If we announced these <a href="/specification/data-types/schemas">schemas</a> then we move onto identifying any divergent state, this involves the following steps:<ul><li>Calculate tuples of <code>(PublicKey, LogId, SeqNum)</code> for <em>all</em> authors who made contributions to any document associated with the <a href="/specification/data-types/schemas">schemas</a> we are synchronizing. </li><li>Sort this resulting list in lexical order (from here on we will refer to this sorted list as the sync range).</li></ul></li><li>In this step we want to efficiently identify all data which one peer may hold which the other does not yet have. This is a two way process, where ultimately both peers may need something from the other.</li><li>With this range we now want to identify any divergent state between peers:<ul><li>Missing logs</li><li>Logs with more entries / higher sequence number</li></ul></li><li>The naive way of achieving this would be for both peers to send the complete range to each other. They would then be able to calculate locally any state that diverged. This would result in unbounded lists of data being continually shared across the network, and has been proven in other p2p protocols to be a highly inefficient pattern.</li><li>p2panda employs a messaging protocol called &quot;range-based set reconciliation&quot; to efficiently identify sub-ranges within our sync range which differ between peers.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="range-based-set-reconciliation">Range-based set reconciliation<a class="hash-link" href="#range-based-set-reconciliation" title="Direct link to heading">​</a></h4><p>Thesis proposing the protocol: <a href="https://github.com/AljoschaMeyer/master_thesis" target="_blank" rel="noopener noreferrer">https://github.com/AljoschaMeyer/master_thesis</a>
Protocol implementation in TypeScript: <a href="https://github.com/earthstar-project/range-reconcile" target="_blank" rel="noopener noreferrer">https://github.com/earthstar-project/range-reconcile</a></p><ul><li>The <code>range-reconcile</code> implementation p2panda makes use of has a number of requirements we satisfy in this specification, these are:<ul><li>Deterministically sorted range of items to be synced</li><li>Encoding format for messages</li><li>Lifting monoid</li></ul></li><li>p2panda sorts it&#x27;s set items in lexical order.</li><li>Messages concerning set reconciliation are encoded in the following form:<ul><li><code>EmptySet</code> message<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;message_type=1 {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;session_id {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;can_respond {bool}&gt;</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><code>LowerBound</code> message<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;message_type=2 {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;session_id {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    [&lt;public_key {string}&gt;, &lt;log_id {u64}&gt;, &lt;seq_num {u64}&gt;]</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><code>Payload</code> message<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;message_type=3 {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;session_id {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;value {[&lt;public_key {string}&gt;, &lt;log_id {u64}&gt;, &lt;seq_num {u64}&gt;]}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;can_respond {bool}&gt;?,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;upper_bound {[&lt;public_key {string}&gt;, &lt;log_id {u64}&gt;, &lt;seq_num {u64}&gt;]}&gt;?</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><code>EmptyPayload</code> message<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;message_type=4 {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;session_id {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;upper_bound {[&lt;public_key {string}&gt;, &lt;log_id {u64}&gt;, &lt;seq_num {u64}&gt;]}&gt;</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><code>Done</code> message<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;message_type=5 {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;session_id {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;upper_bound {[&lt;public_key {string}&gt;, &lt;log_id {u64}&gt;, &lt;seq_num {u64}&gt;]}&gt;</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><code>Fingerprint</code> message<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;message_type=6 {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;session_id {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;lift_type {TODO}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;upper_bound {[&lt;public_key {string}&gt;, &lt;log_id {u64}&gt;, &lt;seq_num {u64}&gt;]}&gt;</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><code>Terminal</code> message<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;message_type=7 {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;session_id {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li>All messages contain a <code>session_id</code> which was determined during <code>SyncRequest</code></li></ul></li><li>The lifting monoid we use is based on the xxHash hashing algorithm.</li><li>From this point on set reconciliation progresses until divergent state is identified. To read more about the messaging protocol please refer to the above documents.</li><li>Set reconciliation and exchange of actual append-only log entries can take place at the same time as we&#x27;re gaining knowledge about the other peer&#x27;s state continously.</li><li>When a Peer B receives an <code>EmptySet</code> message right from the beginning, the Peer B is asked to send all entries of the requested schemas to Peer A.</li><li>After set reconciliation completed, both peers need to determine the logs which have not been mentioned by the other peer yet. The remaining <code>Entry</code> messages are then sent.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="22-synchronization-of-data">2.2. Synchronization of data<a class="hash-link" href="#22-synchronization-of-data" title="Direct link to heading">​</a></h3><ul><li>Whenever a peer receives a <code>Payload</code> then it must locally determine exactly which log entries it needs to send the other peer in order for them to converge towards the same state. It does this by:<ul><li>Retrieve a log from it&#x27;s local store identified by the <code>public_key</code> and <code>log_id</code> received in the payload<ul><li>If no log is found, then we <em>know</em> the other peer has data we don&#x27;t know about and we can assume <em>they</em> will send it to <em>us</em>.</li><li>If a log is found and our local <code>seq_num</code> is less than the received one we <em>know</em> the other peer has data we don&#x27;t know about and we can assume <em>they</em> will send it to <em>us</em>.</li><li>If a log is found and our local <code>seq_num</code> is greater than the received one we <em>know</em> we have data the other peer doesn&#x27;t and we should send it to them.</li></ul></li></ul></li><li>This diffing process can take place already during set reconcilation. Sending the actual entry data can also happen simultaneously.</li><li>Whenever a peer receives an <code>EmptySet</code> at the beginning of set reconciliation it needs to send all entry data related to the requested schemas directly</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="entry-message"><code>Entry</code> message<a class="hash-link" href="#entry-message" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;message_type=8 {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;session_id {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;entry {bytes}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;operation {bytes}&gt;</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="validation">Validation<a class="hash-link" href="#validation" title="Direct link to heading">​</a></h4><ul><li>On receiving an entry the remote peer should perform all expected validation checks of the contained data.<ul><li>Next to the already specified validation checks for Bamboo Entries and p2panda Operations we need to additionally check:<ul><li>Is the data related to what was requested</li></ul></li></ul></li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="finalisation">Finalisation<a class="hash-link" href="#finalisation" title="Direct link to heading">​</a></h4><ul><li>After set reconciliation finished we can finally determine which logs have not been mentioned at all by the other peer. Both peers determine the missing logs for the other peer and send all related entries.</li><li>When all data was finally sent (including the missing logs) the peer sends a <code>SyncDone</code> message. When both peers received each others <code>SyncDone</code> messages they can consider the replication as finished.</li><li>If both <code>SyncDone</code> messages have the <code>live_mode</code> flag set to <code>true</code> they can continue communication with each other, in an upgraded &quot;live mode&quot;.</li></ul><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="syncdone-message"><code>SyncDone</code> message<a class="hash-link" href="#syncdone-message" title="Direct link to heading">​</a></h5><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;message_type=9 {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;session_id {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;live_mode {bool}&gt;</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="live-mode">Live Mode<a class="hash-link" href="#live-mode" title="Direct link to heading">​</a></h3><p>Two peers talking to each other for the first time, first starting with set reconciliation, replicating all data and then after finishing this upgrading to live mode. At one point (for example because the routing algorithm decided to change peers) we can close that communication as well by sending a <code>SyncDone</code> message again, but with <code>live_mode</code> set to false.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">SyncRequest</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">.. A LOT OF SET RECONCILIATION MESSAGES .. A LOT OF `Entry` messages .. (different log heights)</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">.. A LOT OF `Entry` messages .. (missing logs)</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">SyncDone live_mode=true</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">.. A LOT OF `Entry` messages ..</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">SyncDone live_mode=false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Two peers talking to each other, but opting out of live mode straight away, only replicate once over set reconciliation.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">SyncRequest</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">.. A LOT OF SET RECON MESSAGES .. A LOT OF `Entry` messages .. (different log heights)</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">.. A LOT OF `Entry` messages .. (missing logs)</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">SyncDone live_mode=false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="log-height-mode">Log Height Mode<a class="hash-link" href="#log-height-mode" title="Direct link to heading">​</a></h3><ul><li>If for any reason it is un-desireable for a node implementation to support the recommended replication method using Set Reconciliation, then they can still participate in the network by supporting only Log Height replication by sending a <code>Have</code> message directly after receiving a <code>SyncRequest</code> message.</li><li>Log Height mode should be announced in the peers <code>Announce</code> message.</li><li>A <code>Have</code> message should contain a set of <em>all</em> public key, log id, seq num tuples the peer holds for the requested sync range.</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="have-message"><code>Have</code> message<a class="hash-link" href="#have-message" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;message_type=10 {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;session_id {u64}&gt;,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &lt;log_height {[&lt;public_key {string}&gt;, &lt;log_id {u64}&gt;, &lt;seq_num {u64}&gt;, ...]}&gt;</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/specification/networking/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Networking</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/specification/encoding-data"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Canonic Encoding</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href="#assumptions" class="table-of-contents__link toc-highlight">Assumptions</a></li></ul></li><li><a href="#encoding" class="table-of-contents__link toc-highlight">Encoding</a></li><li><a href="#1-announcement" class="table-of-contents__link toc-highlight">1. Announcement</a><ul><li><a href="#announce-message" class="table-of-contents__link toc-highlight"><code>Announce</code> message</a></li></ul></li><li><a href="#2-replication" class="table-of-contents__link toc-highlight">2. Replication</a><ul><li><a href="#syncrequest-message" class="table-of-contents__link toc-highlight"><code>SyncRequest</code> message</a></li><li><a href="#21-identifying-divergent-state" class="table-of-contents__link toc-highlight">2.1. Identifying divergent state</a></li><li><a href="#22-synchronization-of-data" class="table-of-contents__link toc-highlight">2.2. Synchronization of data</a></li><li><a href="#live-mode" class="table-of-contents__link toc-highlight">Live Mode</a></li><li><a href="#log-height-mode" class="table-of-contents__link toc-highlight">Log Height Mode</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer_J6tW"><img class="footer-img__0Xc" src="/images/deepsea-panda.svg" width="100"><div><img class="supporters-img_P2oV" src="/images/nlnet-logo.svg" width="140"><img class="supporters-img_P2oV" src="/images/ngi-logo.png" width="200"><img class="supporters-img_P2oV" src="/images/eu-flag-logo.png" width="78"><p class="footer-text_MXRq">This project has received funding from the European Union’s Horizon 2020 research and innovation programme within the framework of the NGI-POINTER Project funded under grant agreement No 871528</p></div><p class="footer-text_MXRq">CC BY-SA 4.0<!-- --> - <a href="mailto:contributors@p2panda.org">Contact</a></p></footer></div>
<script src="/assets/js/runtime~main.e77259a2.js"></script>
<script src="/assets/js/main.125a03bc.js"></script>
</body>
</html>