<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-specification/authorisation">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Authorisation | p2panda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://p2panda.org/specification/authorisation"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Authorisation | p2panda"><meta data-rh="true" name="description" content="While this section is almost fully complete and even implemented, it might be a little rough at the edges: We&#x27;re still working on a fun to use high-level API!"><meta data-rh="true" property="og:description" content="While this section is almost fully complete and even implemented, it might be a little rough at the edges: We&#x27;re still working on a fun to use high-level API!"><link data-rh="true" rel="icon" href="/images/deepsea-panda.svg"><link data-rh="true" rel="canonical" href="https://p2panda.org/specification/authorisation"><link data-rh="true" rel="alternate" href="https://p2panda.org/specification/authorisation" hreflang="en"><link data-rh="true" rel="alternate" href="https://p2panda.org/specification/authorisation" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.de076f58.css">
<link rel="preload" href="/assets/js/runtime~main.af7f680f.js" as="script">
<link rel="preload" href="/assets/js/main.125a03bc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><div class="navbar__brand"><div class="navbar__logo"><img src="/images/p2panda-book.png" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/p2panda-book.png" class="themedImage_ToTc themedImage--dark_i4oU"></div></div></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/about/">About</a><a class="navbar__item navbar__link" href="/learn/">Learn</a><a class="navbar__item navbar__link" href="/tutorials/">Tutorials</a><a class="navbar__item navbar__link" href="/libraries/">Libraries</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/specification/">Specification</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/faq">FAQ</a><a class="navbar__item navbar__link" href="/links">Links</a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedImage_ToTc themedImage--dark_i4oU"></a><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/key-concepts">Key Concepts</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/specification/data-types/bamboo">Core data types</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/specification/authorisation">Authorisation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/encryption">Encryption</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/specification/APIs/overview">APIs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/specification/networking/clients-nodes">Networking</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/replication">Replication</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/encoding-data">Canonic Encoding</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/specification/glossary">Glossary</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><img src="/images/deepsea-panda.svg" width="30" class="icon-home_wWeS"></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Authorisation</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Authorisation: Key Group</h1><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üå©Ô∏è</span></span>Under construction</div><div class="admonitionContent_S0QG"><p>While this section is almost fully complete and even <a href="https://github.com/p2panda/p2panda/pull/279" target="_blank" rel="noopener noreferrer">implemented</a>, it might be a little rough at the edges: We&#x27;re still working on a fun to use high-level API!</p></div></div><p>The <code>key_group</code> schema is a way to group a set of public keys so that they can act as a single identity. Every member key can have different permissions limiting the extent to which they can publish operations as this single identity. Keys can only be added to a key group with a confirmation from both the key itself and an existing member key with the according permissions. Key groups can also be extended with other key groups, which extends the set of keys in the former with those from the latter. Key groups can serve as a building block for many other concepts in p2panda including identity (handles/usernames), multi-device usage, permissions and moderation.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="use-case">Use Case<a class="hash-link" href="#use-case" title="Direct link to heading">‚Äã</a></h2><ul><li>A key group can be created using a key pair.</li><li>A key can be added to a key group, making it a <em>member</em>.</li><li>A key can be removed from a key group.</li><li>A key group can be added to a key group, making it a <em>member</em>.</li><li>Specific <em>permissions</em> can be defined for members of a key group.<ul><li>A membership can be limited to publishing operations in specific schemas.</li><li>A membership can be limited to specific operation actions (e.g. excluding <code>DELETE</code> actions).
8- Specific <em>permissions</em> can be defined for individual keys of a key group.</li></ul></li><li>Developers can make key groups the owners of a schema&#x27;s documents by creating an <em>authorised schema</em>.<ul><li>Key group members can publish operations for documents that define the key group as their owner.</li><li>Key group members can not publish operations for that key group&#x27;s documents when their key group membership doesn&#x27;t define the required permissions.</li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="authorised-schemas">Authorised Schemas<a class="hash-link" href="#authorised-schemas" title="Direct link to heading">‚Äã</a></h2><ul><li>Authorised schemas define a key group as the owner of documents created with them.<ul><li>Use an authorised schema when you want to enable all key group members with according permissions to update or delete that document.</li><li>Documents created from authorised schemas are called <em>authorised documents</em>.</li></ul></li><li>Schemas are <em>authorised schemas</em> if they contain a single field of type <code>owner</code> that contains:<ul><li>either the document view id of a key group,</li><li>or the document view id of another authorised document.</li></ul></li><li>Every document of an <em>authorised schema</em> has a set of <em>authorised public keys</em>. This set can be created by looking at the document pointed at by the <code>owner</code> type field:<ul><li>if it points at an authorised document, continue from there</li><li>if a key group is found: that key group&#x27;s keys are the document&#x27;s authorised public keys.</li></ul></li><li>Operations of <em>authorised schemas</em> are only materialised if they were created by a key pair included in the <em>authorised public keys</em> of the operations&#x27;s document and if that key pair membership has the required permissions for the operation.</li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="key-groups">Key groups<a class="hash-link" href="#key-groups" title="Direct link to heading">‚Äã</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="schema-key_group_v1">Schema <code>key_group_v1</code><a class="hash-link" href="#schema-key_group_v1" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">name: string</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">members: relation_list(key_group_membership_v1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>The name of a key group should be chosen so that its purpose can be understood.</li></ul><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêª‚Äç‚ùÑÔ∏è</span></span>Jam Queue</div><div class="admonitionContent_S0QG"><p>By adding an <code>inverse: boolean</code> field here we could allow a) anyone to change a document (wow chaos) b) <em>exclude</em> specific keys from editing a document.</p></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="memberships">Memberships<a class="hash-link" href="#memberships" title="Direct link to heading">‚Äã</a></h3><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="schema-key_group_membership_request_v1">Schema <code>key_group_membership_request_v1</code><a class="hash-link" href="#schema-key_group_membership_request_v1" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">key_group: relation(key_group_v1)</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">? member: owner(key_group_v1)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A <em>key group membership request</em> is created in order to add its authoring public key to a key group. It says &quot;Hey! Would you mind adding me to this key group?&quot;</p><p>The optional <code>member</code> field allows specifying a key group that requests membership instead of the public key that published this operation. A key group membership request that defines a <code>member</code> should only be considered valid if its authoring public key has a membership in that key group with <code>can_authorise</code> set to <code>true</code>.</p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><span class="panda-icon">üêº</span></span>Jam Queue</div><div class="admonitionContent_S0QG"><p>If a <code>member</code> is defined and the membership has <code>can_authorise</code> set to false, the member key group can still change the key set of the parent key group by changing its own members. This could be prevented by making <code>member</code> a pinned relation.</p></div></div><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="schema-key_group_membership_v1">Schema <code>key_group_membership_v1</code><a class="hash-link" href="#schema-key_group_membership_v1" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain"># defines the owner of this membership</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">key_group: owner(key_group_v1)</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"># points at the original membership request</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">request: pinned_relation(key_group_membership_request_v1)</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"># if set, limit this membership to the schema id specified</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">? schema: string</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"># set true to accept the request, can be set to `false` with a later update</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">accepted: boolean</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"># if true, this membership can authorise membership requests for the key group,  add the key group to other key groups and edit membership limits.</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">can_authorise: boolean</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"># if true, this membership can create documents owned by the key group</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">can_create: boolean</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"># if true, this membership can update documents owned by the key group</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">can_update: boolean</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"># if true, this membership can delete documents owned by the key group</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">can_delete: boolean</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A <em>key group membership</em> is created to <em>accept</em> or <em>reject</em> a group membership request.</p><p>If accepted, the public key that created the <em>key group membership request</em> is now included in the key group&#x27;s key set. If the membership request defines a <code>member</code> key group, that key group&#x27;s key set is included instead.</p><p>If rejected, all <em>key group membership requests</em> by the same public key and the same <code>member</code> value should be considered invalid.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="schema-field-definition-field-type-owner">Schema Field Definition: Field Type <code>owner</code><a class="hash-link" href="#schema-field-definition-field-type-owner" title="Direct link to heading">‚Äã</a></h2><ul><li>The field definition looks similar to <code>pinned_relation</code></li><li>The schema id this relation references must be an <em>authorised schema</em>. Any schema field definition for which this does not hold is invalid.</li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="example-chat-schema">Example: Chat Schema<a class="hash-link" href="#example-chat-schema" title="Direct link to heading">‚Äã</a></h2><p>In this example we want to represent chat messages and their authors. Authors should have a name and a profile picture. We also want to make sure that only key pairs controlled by the author can publish chat messages that are linked to the auth(or)&#x27;s name and picture.</p><p>Instances of the new <code>account</code> schema have an <code>owner</code> pointing at a key group that contains all public keys of a user and a <code>picture</code> that contains the profile picture as a base64-encoded <code>string</code>.
We can use the name field on the key group as an account user name.</p><p><strong>Schema <code>account</code>:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">group: owner(key_group_v1)</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">picture: string</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Because it has an <code>owner</code>, operations for this <code>account</code> schema are only valid if they are signed by one of the keys contained in the key group referred to in the <code>owner</code>.</p><p>Now we can create the schema for chat messages. It combines the chat message&#x27;s content with a link to an instance of the <code>account</code> schema.</p><p><strong>Schema <code>chat-message</code>:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">content: string</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">author: owner(account)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Again, because this uses <code>owner</code>, operations for this schema are only valid when signed by one of the keys referred to by the <code>owner</code>.</p><p>How could a query for this schema look like? This is a GraphQL schema for a query that retrieves <code>chat-message</code> instances, as well as the name and picture of their authors.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">chat-message {</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    fields {</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      content,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      author {</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">        fields {</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">          picture,</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">          group {</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">            fields {</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">              name</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/specification/data-types/blobs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Blobs</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/specification/encryption"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Encryption</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#use-case" class="table-of-contents__link toc-highlight">Use Case</a></li><li><a href="#authorised-schemas" class="table-of-contents__link toc-highlight">Authorised Schemas</a><ul><li><a href="#key-groups" class="table-of-contents__link toc-highlight">Key groups</a></li><li><a href="#memberships" class="table-of-contents__link toc-highlight">Memberships</a></li></ul></li><li><a href="#schema-field-definition-field-type-owner" class="table-of-contents__link toc-highlight">Schema Field Definition: Field Type <code>owner</code></a></li><li><a href="#example-chat-schema" class="table-of-contents__link toc-highlight">Example: Chat Schema</a></li></ul></div></div></div></div></main></div></div><footer class="footer_J6tW"><img class="footer-img__0Xc" src="/images/deepsea-panda.svg" width="100"><div><img class="supporters-img_P2oV" src="/images/nlnet-logo.svg" width="140"><img class="supporters-img_P2oV" src="/images/ngi-logo.png" width="200"><img class="supporters-img_P2oV" src="/images/eu-flag-logo.png" width="78"><p class="footer-text_MXRq">This project has received funding from the European Union‚Äôs Horizon 2020 research and innovation programme within the framework of the NGI-POINTER Project funded under grant agreement No 871528</p></div><p class="footer-text_MXRq">CC BY-SA 4.0<!-- --> - <a href="mailto:contributors@p2panda.org">Contact</a></p></footer></div>
<script src="/assets/js/runtime~main.af7f680f.js"></script>
<script src="/assets/js/main.125a03bc.js"></script>
</body>
</html>