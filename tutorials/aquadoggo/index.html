<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tutorials/aquadoggo" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Tutorial: Set up a local node | p2panda</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://p2panda.org/tutorials/aquadoggo"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Tutorial: Set up a local node | p2panda"><meta data-rh="true" name="description" content="This tutorial walks you through setting up a locally running p2panda node on your computer and shows you how you can configure it and interact with it via the GraphQL playground."><meta data-rh="true" property="og:description" content="This tutorial walks you through setting up a locally running p2panda node on your computer and shows you how you can configure it and interact with it via the GraphQL playground."><link data-rh="true" rel="icon" href="/images/deepsea-panda.svg"><link data-rh="true" rel="canonical" href="https://p2panda.org/tutorials/aquadoggo"><link data-rh="true" rel="alternate" href="https://p2panda.org/tutorials/aquadoggo" hreflang="en"><link data-rh="true" rel="alternate" href="https://p2panda.org/tutorials/aquadoggo" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="p2panda News RSS Feed"><link rel="stylesheet" href="/assets/css/styles.862b1275.css">
<script src="/assets/js/runtime~main.3ccf63d2.js" defer="defer"></script>
<script src="/assets/js/main.97848bd4.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><div class="navbar__brand"><div class="navbar__logo"><img src="/images/p2panda-book.png" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/images/p2panda-book.png" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></div></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/images/p2panda-book.png" alt="p2panda Handbook" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/about/">About</a><a class="navbar__item navbar__link" href="/learn/">Learn</a><a class="navbar__item navbar__link" href="/tutorials/">Tutorials</a><a class="navbar__item navbar__link" href="/sdks/">SDKs</a><a class="navbar__item navbar__link" href="/specifications/">Specifications</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/faq">FAQ</a><a class="navbar__item navbar__link" href="/links">Links</a><a class="navbar__item navbar__link" href="/contact">Contact</a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Tutorial: Set up a local node</h1></header><p>This tutorial walks you through setting up a locally running p2panda node on your computer and shows you how you can configure it and interact with it via the GraphQL playground.</p>
<p>It&#x27;s good to know how to run your own node if you want to start developing p2panda clients. You can try out new schemas and applications with them or just experiment!</p>
<p>We will use the reference node implementation <a href="https://github.com/p2panda/aquadoggo" target="_blank" rel="noopener noreferrer"><code>aquadoggo</code></a> for this, which is a command line application written in Rust.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="but-what-is-an-aquadoggo">But what <em>is</em> an <code>aquadoggo</code>?<a href="#but-what-is-an-aquadoggo" class="hash-link" aria-label="Direct link to but-what-is-an-aquadoggo" title="Direct link to but-what-is-an-aquadoggo">​</a></h2>
<p><code>aquadoggo</code> are nodes in a p2panda network, they perform several important tasks related to discovering and communicating with other nodes, as well as offering APIs used when building client applications. The core tasks are:</p>
<ul>
<li>discover and replicate with other p2panda nodes</li>
<li>find data on the network following registered schema ids</li>
<li>serve GraphQL and HTTP endpoints used by client applications</li>
</ul>
<p>Nodes are usually agnostic to the applications using them, this means that one node could potentially support hundreds of different p2panda applications. Having one node running on your computer is therefore already enough! You can read more about nodes in the regarding <a href="/learn/networks">Learn</a> section.</p>
<p>:::</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="what-do-i-need">What do I need?<a href="#what-do-i-need" class="hash-link" aria-label="Direct link to What do I need?" title="Direct link to What do I need?">​</a></h2>
<ul>
<li>Terminal</li>
<li>Browser</li>
</ul>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="download-aquadoggo">Download <code>aquadoggo</code><a href="#download-aquadoggo" class="hash-link" aria-label="Direct link to download-aquadoggo" title="Direct link to download-aquadoggo">​</a></h2>
<p>Head over to the <a href="https://github.com/p2panda/aquadoggo/releases" target="_blank" rel="noopener noreferrer">Releases</a> page to download the pre-compiled binary for your platform. This tutorial was written using <code>v0.7.0</code>.</p>
<p>Or on the command line:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token comment" style="color:#66cccc"># Download and unpack aquadoggo v0.7.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token function" style="color:#66cccc;font-weight:bold">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#f2f0ec">-L</span><span class="token plain"> https://github.com/p2panda/aquadoggo/releases/download/v0.7.0/aquadoggo-v0.7.0-x86_64-unknown-linux-gnu.tar.gz </span><span class="token operator" style="color:#f2f0ec">|</span><span class="token plain"> </span><span class="token function" style="color:#66cccc;font-weight:bold">tar</span><span class="token plain"> </span><span class="token parameter variable" style="color:#f2f0ec">-xz</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For the rest of the tutorial we will run aquadoggo simply using the command <code>./aquadoggo</code>. If required, in your own commands adjust this to match the name of the binary you downloaded or rename it to accordingly.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="start-the-node">Start the node<a href="#start-the-node" class="hash-link" aria-label="Direct link to Start the node" title="Direct link to Start the node">​</a></h2>
<p>To start the node now you only have to run the following command. Make sure you&#x27;re in the directory where you downloaded the aquadoggo binary!</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">./aquadoggo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>You should see roughly this output:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">                       ██████ ███████ ████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                      ████████       ██████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                      ██████            ███</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                       █████              ██</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                       █     ████      █████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                      █     ██████   █ █████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                     ██      ████   ███ █████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                    █████         ██████    █</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                   ███████                ██</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                   █████████   █████████████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                   ███████████      █████████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                   █████████████████         ████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">              ██████    ███████████              ██</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">          ██████████        █████                 █</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">           █████████        ██          ███       ██</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">             ██████        █            █           ██</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">                ██       ██             ███████     ██</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">              ███████████                      ██████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">████████     ████████████                   ██████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">████   ██████ ██████████            █   ████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  █████████   ████████       ███    ███████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    ████████             ██████    ████████</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">█████████  ████████████████████████   ███</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">█████████                      ██</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">aquadoggo v0.7.0</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">No config file provided</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">Configuration</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">Allow schema IDs: * (any schema id)</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">Database URL: memory (data is not persisted)</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">mDNS: enabled</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">Private key: ephemeral (not persisted)</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">Relay mode: disabled</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">Node is ready!</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">Go to http://0.0.0.0:2020/graphql to use GraphQL playground</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">Peer id: 12D3KooWRfiHJzaRAoBAEkS4g9n9EP5x7muN6QXqpALH3HRBxEdn</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">Node is listening on 0.0.0.0:2022</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Well done!! You have a running <code>aquadoggo</code> node :-)</p>
<p>Let&#x27;s unpack the output a little. There&#x27;s a cute panda riding an aquadoggo of course, then version, then a warning about us not providing a config file, followed by some (default) configuration values. We wanted it to be simple to get started and playing around with <code>aquadoggo</code> so a easy-to-use default configuration is provided. With this configuration the node can be considered &quot;ephemeral&quot; as it doesn&#x27;t persist any data between runs. Additionally it is configured to discover other nodes on the local network, ask them what schema they know about, and start supporting these schema itself. Although unlikely to be the behavior you want in a production environment, it is quite handy for getting started during development.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="see-more-logs">See more logs<a href="#see-more-logs" class="hash-link" aria-label="Direct link to See more logs" title="Direct link to See more logs">​</a></h3>
<p>We can quit the node by pressing <code>CTRL</code> + <code>C</code> in the regarding terminal. Let&#x27;s start it again, but this time with more logging enabled:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">./aquadoggo --log-level</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain">info</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>As well as the above, you should now get these more detailed logs:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">[2024-01-22T15:44:50Z INFO  aquadoggo::manager] Start materializer service</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">[2024-01-22T15:44:50Z INFO  aquadoggo::materializer::worker] Register reduce worker with pool size 16</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">[2024-01-22T15:44:50Z INFO  aquadoggo::materializer::worker] Register dependency worker with pool size 16</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">[2024-01-22T15:44:50Z INFO  aquadoggo::materializer::worker] Register schema worker with pool size 16</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">[2024-01-22T15:44:50Z INFO  aquadoggo::materializer::worker] Register blob worker with pool size 16</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">[2024-01-22T15:44:50Z INFO  aquadoggo::materializer::worker] Register garbage_collection worker with pool size 16</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">[2024-01-22T15:44:50Z INFO  aquadoggo::manager] Start http service</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">[2024-01-22T15:44:50Z INFO  aquadoggo::manager] Start network service</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">[2024-01-22T15:44:50Z INFO  aquadoggo::network::service] Networking service initializing...</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">[2024-01-22T15:44:50Z INFO  aquadoggo::network::service] Network service ready!</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">[2024-01-22T15:44:50Z INFO  aquadoggo::manager] Start replication service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you want to see even more you can change the log verbosity from <code>info</code> to <code>debug</code> or even <code>trace</code>, but then you will see a whole flood of information you might not always need.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="graphql-playground">GraphQL playground<a href="#graphql-playground" class="hash-link" aria-label="Direct link to GraphQL playground" title="Direct link to GraphQL playground">​</a></h2>
<p>How can we actually check that the node is running? When starting <code>aquadoggo</code> it will automatically open an HTTP server on port <code>2020</code> with an GraphQL API. On top of that it offers a playground for us to already play with the GraphQL API. We can visit it by opening our browser and going to:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">http://localhost:2020/graphql</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="send-a-query">Send a query<a href="#send-a-query" class="hash-link" aria-label="Direct link to Send a query" title="Direct link to Send a query">​</a></h3>
<p>Maybe you have never worked with <a href="https://graphql.org/" target="_blank" rel="noopener noreferrer">GraphQL</a> before but we can just send some queries to the node for fun. You can enter a query in the left area of the playground and click the large <em>Play</em> button in the middle. This will send the query to the node and its JSON response will show in the right area.</p>
<p>Try this following query by entering it in the left textarea and clicking the <em>Play</em> button:</p>
<div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token object">all_schema_definition_v1</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token object">documents</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      </span><span class="token object">fields</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">        </span><span class="token property">name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">        </span><span class="token property">description</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">      </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  </span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token punctuation" style="color:#f2f0ec">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>It will return the following, relative unspectacular response in the right area:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">{</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  &quot;data&quot;: {</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">    &quot;all_schema_definition_v1&quot;: []</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Still, this is already doing a lot! With this query we asked our <code>aquadoggo</code> if it knows any schemas and since we have just started it it doesn&#x27;t know any yet! This is why the response is empty .. It&#x27;s soon time to teach the <code>aquadoggo</code> some tricks but this is part of the next <a href="/tutorials/fishy">how to create a schema tutorial</a>. For now we get to know the doggo a little bit better.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="documentation">Documentation<a href="#documentation" class="hash-link" aria-label="Direct link to Documentation" title="Direct link to Documentation">​</a></h3>
<p>You can see, this is already how we can interact with the node at any time, we can simply just write queries in the playground using our browser! When building a p2panda client you do nothing else: The client sends GraphQL queries to the node and handles the JSON responses! If you&#x27;re curious now on how to build a client you can check out this <a href="/tutorials/mushroom-app">how to build a client tutorial</a>.</p>
<p>There are a couple of more queries you can find when you click on the <em>Docs</em> tab in the right sidebar. Next to the <code>all_schema_definition_v1</code> query you find others, for example
<code>all_schema_field_definition_v1</code> or <code>schema_definition_v1</code> etc.... Later you will find more queries here you created yourself by introducing new schemas to the node!</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐧</span></span>What are all these queries?</div><div class="admonitionContent_BuS1"><p>These queries serve to find out which schemas exist, they will be used by <a href="https://p2panda.org/specification/APIs/queries" target="_blank" rel="noopener noreferrer">clients</a> (&quot;Client API&quot;). Surely there will be more queries coming in the future.</p></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="configuration">Configuration<a href="#configuration" class="hash-link" aria-label="Direct link to Configuration" title="Direct link to Configuration">​</a></h2>
<p>Now we learned how to start a node and how to interact with it via GraphQL! Let&#x27;s see now how we can configure and adjust it to our particular needs. This is mainly a collection of <em>cool tricks</em> and not a full documentation of <code>aquadoggo</code>, also you probably might not need all of this in the beginning, but maybe it comes in handy soon!</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>info</div><div class="admonitionContent_BuS1"><p>If you like spoilers and just want to dive into the full config options then our <a href="https://github.com/p2panda/aquadoggo/blob/main/aquadoggo_cli/config.toml" target="_blank" rel="noopener noreferrer">example config.toml file</a> is a good place to start!</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="persistent-storage">Persistent storage<a href="#persistent-storage" class="hash-link" aria-label="Direct link to Persistent storage" title="Direct link to Persistent storage">​</a></h3>
<p>In most cases we will want to persist our nodes identity and database on the filesystem. In order to configure this behavior we the use the <code>--database-url</code>, <code>--blobs-base-path</code> and <code>--private-key</code> command line arguments.</p>
<p>This is how we would configure the node with an <code>SQLite</code> database, blob storage and a private key all stored at a suitable path for a Linux machine:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">./aquadoggo </span><span class="token punctuation" style="color:#f2f0ec">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  --database-url</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;sqlite:</span><span class="token string environment constant" style="color:#6699cc">$HOME</span><span class="token string" style="color:#cc99cc">/.local/share/aquadoggo/db.sqlite3&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  --blobs-base-path</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;</span><span class="token string environment constant" style="color:#6699cc">$HOME</span><span class="token string" style="color:#cc99cc">/.local/share/aquadoggo&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  --private-key</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;</span><span class="token string environment constant" style="color:#6699cc">$HOME</span><span class="token string" style="color:#cc99cc">/.local/share/aquadoggo/private-key.txt&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>aquadoggo</code> supports both <code>SQLite</code> and <code>PostgreSQL</code> databases, more on this later.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="delete-node-data">Delete node data<a href="#delete-node-data" class="hash-link" aria-label="Direct link to Delete node data" title="Direct link to Delete node data">​</a></h3>
<p>Especially during development you might want to delete your database, blobs and even your identity. You can do this by simply removing the data directory:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token function" style="color:#66cccc;font-weight:bold">rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#f2f0ec">-rf</span><span class="token plain"> </span><span class="token environment constant" style="color:#6699cc">$HOME</span><span class="token plain">/.local/share/aquadoggo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Make sure that <code>aquadoggo</code> is not running anymore before you delete that folder.</p>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🌩️</span></span>Watch out!</div><div class="admonitionContent_BuS1"><p>This is <em>really</em> deleting everything you stored in your node <em>and</em> your node key pair.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="postgresql-or-sqlite">PostgreSQL or SQLite<a href="#postgresql-or-sqlite" class="hash-link" aria-label="Direct link to PostgreSQL or SQLite" title="Direct link to PostgreSQL or SQLite">​</a></h3>
<p><code>aquadoggo</code> allows you to use an SQLite <em>or</em> PostgreSQL database. SQLite is the default and really amazing as it does not require you to set up an actual database software. This is why it is so easy to just start an <code>aquadoggo</code>. It is also very useful for embedding <code>aquadoggo</code> for example <em>inside</em> of an application where you don&#x27;t want the users to also take care of the database, all should just work &quot;out of the box&quot;.</p>
<p>Sometimes you want to use PostgreSQL though, maybe because you are planning to host your <code>aquadoggo</code> on a server where it will be used by hundreds of users at the same time. For this of course you need a <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-18-04" target="_blank" rel="noopener noreferrer">running PostgreSQL database</a>.</p>
<p>Just change the <code>--database-url</code> command line argument to now use a PostgreSQL database:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token comment" style="color:#66cccc"># Use an external PostgreSQL database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">./aquadoggo --database-url</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;postgresql://postgres:postgres@localhost:5432/aquadoggo&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>Explore SQLite</div><div class="admonitionContent_BuS1"><p>If using an <a href="https://www.sqlite.org/index.html" target="_blank" rel="noopener noreferrer">SQLite</a> database, and you have an <code>sqlite3</code> client installed you can explore the database like that:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token comment" style="color:#66cccc"># Explore the SQLite database (on Linux)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">sqlite3 </span><span class="token environment constant" style="color:#6699cc">$HOME</span><span class="token plain">/.local/share/aquadoggo/aquadoggo-node.sqlite3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐼</span></span>Migrations</div><div class="admonitionContent_BuS1"><p><code>aquadoggo</code> checks if there are any pending SQL migrations on every start up. If it detects missing migrations it will run it automatically against the given database.</p></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http-port">HTTP port<a href="#http-port" class="hash-link" aria-label="Direct link to HTTP port" title="Direct link to HTTP port">​</a></h3>
<p>By default <code>aquadoggo</code> starts an HTTP server on port <code>2020</code>. If you want to change this you can use the <code>--http-port</code> command line argument like this</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token comment" style="color:#66cccc"># This changes the http endpoint to http://localhost:4040</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">./aquadoggo --http-port</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token number" style="color:#cc99cc">4040</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This is useful if for whatever reason your port <code>2020</code> is already occupied or if you want to run <em>more than one</em> aquadoggo.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="allowed-schema-ids">Allowed Schema IDs<a href="#allowed-schema-ids" class="hash-link" aria-label="Direct link to Allowed Schema IDs" title="Direct link to Allowed Schema IDs">​</a></h3>
<p>By default, your <code>aquadoggo</code> doesn&#x27;t restrict the schema it replicates and materializes, it is interested in <em>anything</em> it may come in contact with on the network. If you want to restrict this, you can do so by defining a list of <code>allowed-schema-ids</code>.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token comment" style="color:#66cccc"># This node will replicate documents for these two schema and build custom GraphQL API for queries.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">./aquadoggo </span><span class="token punctuation" style="color:#f2f0ec">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  --allow-schema-ids</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;mushrooms_0020c3accb0b0c8822ecc0309190e23de5f7f6c82f660ce08023a1d74e055a3d7c4d&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  --allow-schema-ids</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;mushroom_findings_0020aaabb3edecb2e8b491b0c0cb6d7d175e4db0e9da6003b93de354feb9c52891d0&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="discovery">Discovery<a href="#discovery" class="hash-link" aria-label="Direct link to Discovery" title="Direct link to Discovery">​</a></h3>
<p>Node discovery is configurable through the arguments <code>--mdns</code>, <code>--relay-addresses</code> and <code>--relay-mode</code>.</p>
<p>You can configure your node to discover local nodes via mDNS (on by default) and by registering on relay node. A relay node will share addresses for other nodes they learn about.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">./aquadoggo </span><span class="token punctuation" style="color:#f2f0ec">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  --relay-addresses</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;192.0.2.16:2022&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  --relay-addresses</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;192.0.2.17:2022&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If nodes are discovered via a relay then forming a direct connection between peers is first attempted (using NAT traversal techniques where required), if this fails then the connection is routed through the relay.</p>
<p>If you want your node to itself act as a relay set the <code>--relay-mode</code> flag.</p>
<h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="peers">Peers<a href="#peers" class="hash-link" aria-label="Direct link to Peers" title="Direct link to Peers">​</a></h3>
<p>You can configure which peers you connect to using the <code>--direct-node-addresses</code>, <code>--allow-peer-ids</code> and <code>--block-peer-ids</code> arguments.</p>
<p><code>--direct-node-addresses</code> is useful when you want to connect to nodes with static reachable addresses. Allowing and blocking peers is useful when you want to control the peers you connect to by their id when using relay or mDNS discovery techniques.</p>
<p>Running a node which will only connect to a list of allowed peers (discovered via mDNS or relay) would look like this:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token plain">./aquadoggo </span><span class="token punctuation" style="color:#f2f0ec">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  --relay-addresses</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;192.0.2.16:2022&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  --allow-peer-ids</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;12D3KooWCw68m5CRcV8vD9iuR325oKwJHLYqTYH5mYwD6k2QV4nm&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  --allow-peer-ids</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;12D3KooWCjiCXB1WPy9AYn73zjmwkVeUqLsrwgWFvsJhe69ivnCn&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#f2f0ec">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain">  --allow-peer-ids</span><span class="token operator" style="color:#f2f0ec">=</span><span class="token string" style="color:#cc99cc">&quot;12D3KooWFiLbne3UtoHPCBbZ8HG3JV6d1rdTDee3XVKRqDAxbGsK&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="configtoml"><code>config.toml</code><a href="#configtoml" class="hash-link" aria-label="Direct link to configtoml" title="Direct link to configtoml">​</a></h2>
<p>Right about now you&#x27;d be forgiven for thinking that this is <em>a lot</em> of command line arguments to work with. <code>aquadoggo</code> is able to read all these configurations (and more!) from a <code>config.toml</code> file, and also via environment variables. The order in which configuration methods are read is 1) config file 2) command line arguments 3) environment variables. This is useful in order to override your default <code>config.toml</code> values at runtime.</p>
<p>Check the extensively documented <code>aquadoggo</code> cli <a href="https://github.com/p2panda/aquadoggo/blob/main/aquadoggo_cli/config.toml" target="_blank" rel="noopener noreferrer">example config file</a> to read about all possible configuration options.</p>
<h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="done">Done!<a href="#done" class="hash-link" aria-label="Direct link to Done!" title="Direct link to Done!">​</a></h2>
<p>Super, you know now how to start an aquadoggo on your computer or server! This is the first step towards running a p2panda application on your computer or building a new one. Check out the <a href="/tutorials/fishy">next tutorial</a> on how to send data to create schema on your running node.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><span class="panda-icon">🐻‍❄️</span></span>Extra: Embed a node</div><div class="admonitionContent_BuS1"><p>This is not part of this tutorial but we just want to mention that you can <em>also</em> run a node programmatically by embedding it directly in your Rust codebase:</p><div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d3d0c8;--prism-background-color:#2d2d2d"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#d3d0c8;background-color:#2d2d2d"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d3d0c8"><span class="token keyword" style="color:#ffcc66">use</span><span class="token plain"> </span><span class="token namespace">aquadoggo</span><span class="token namespace punctuation" style="color:#f2f0ec">::</span><span class="token punctuation" style="color:#f2f0ec">{</span><span class="token class-name" style="color:#9ddab3">Configuration</span><span class="token punctuation" style="color:#f2f0ec">,</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">Node</span><span class="token punctuation" style="color:#f2f0ec">}</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">let</span><span class="token plain"> config </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">Configuration</span><span class="token punctuation" style="color:#f2f0ec">::</span><span class="token function" style="color:#66cccc;font-weight:bold">default</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#d3d0c8"><span class="token plain"></span><span class="token keyword" style="color:#ffcc66">let</span><span class="token plain"> node </span><span class="token operator" style="color:#f2f0ec">=</span><span class="token plain"> </span><span class="token class-name" style="color:#9ddab3">Node</span><span class="token punctuation" style="color:#f2f0ec">::</span><span class="token function" style="color:#66cccc;font-weight:bold">start</span><span class="token punctuation" style="color:#f2f0ec">(</span><span class="token plain">config</span><span class="token punctuation" style="color:#f2f0ec">)</span><span class="token punctuation" style="color:#f2f0ec">.</span><span class="token keyword" style="color:#ffcc66">await</span><span class="token punctuation" style="color:#f2f0ec">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is very similar to using the command line application, just that you can ship your applications now with a node running <em>inside</em>! Users will then automatically start the node whenever they start the application. Together with <a href="https://tauri.app" target="_blank" rel="noopener noreferrer">Tauri</a> your applications can even be written in JavaScript and still use <code>aquadoggo</code> internally - even when you&#x27;re not a Rust developer! Our tauri x p2panda <a href="https://github.com/p2panda/tauri-example" target="_blank" rel="noopener noreferrer">example project</a> will help you get started with right away.</p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#but-what-is-an-aquadoggo" class="table-of-contents__link toc-highlight">But what <em>is</em> an <code>aquadoggo</code>?</a></li><li><a href="#what-do-i-need" class="table-of-contents__link toc-highlight">What do I need?</a></li><li><a href="#download-aquadoggo" class="table-of-contents__link toc-highlight">Download <code>aquadoggo</code></a></li><li><a href="#start-the-node" class="table-of-contents__link toc-highlight">Start the node</a><ul><li><a href="#see-more-logs" class="table-of-contents__link toc-highlight">See more logs</a></li></ul></li><li><a href="#graphql-playground" class="table-of-contents__link toc-highlight">GraphQL playground</a><ul><li><a href="#send-a-query" class="table-of-contents__link toc-highlight">Send a query</a></li><li><a href="#documentation" class="table-of-contents__link toc-highlight">Documentation</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link toc-highlight">Configuration</a><ul><li><a href="#persistent-storage" class="table-of-contents__link toc-highlight">Persistent storage</a></li><li><a href="#delete-node-data" class="table-of-contents__link toc-highlight">Delete node data</a></li><li><a href="#postgresql-or-sqlite" class="table-of-contents__link toc-highlight">PostgreSQL or SQLite</a></li><li><a href="#http-port" class="table-of-contents__link toc-highlight">HTTP port</a></li><li><a href="#allowed-schema-ids" class="table-of-contents__link toc-highlight">Allowed Schema IDs</a></li><li><a href="#discovery" class="table-of-contents__link toc-highlight">Discovery</a></li><li><a href="#peers" class="table-of-contents__link toc-highlight">Peers</a></li></ul></li><li><a href="#configtoml" class="table-of-contents__link toc-highlight"><code>config.toml</code></a></li><li><a href="#done" class="table-of-contents__link toc-highlight">Done!</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer_J6tW"><img class="footer-img__0Xc" src="/images/deepsea-panda.svg" width="100"><div><img class="supporters-img_P2oV" src="/images/nlnet-logo.svg" width="140"><img class="supporters-img_P2oV" src="/images/ngi-logo.png" width="200"><img class="supporters-img_P2oV" src="/images/eu-flag-logo.png" width="78"><p class="footer-text_MXRq">This project has received funding from the European Union’s Horizon 2020 research and innovation programme within the framework of the NGI-POINTER Project funded under grant agreement No 871528, NGI-ASSURE No 957073 and NGI0-ENTRUST No 101069594</p></div><p class="footer-text_MXRq">CC BY-SA 4.0<!-- --> - <a href="/contact">Contact</a> -<!-- --> <a href="https://autonomous.zone/@p2panda" target="_blank" rel="noreferrer">Fediverse</a></p></footer></div>
</body>
</html>